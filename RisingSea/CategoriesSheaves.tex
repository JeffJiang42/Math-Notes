\documentclass[psamsfonts]{amsart}
%
%-------Packages---------
%
\usepackage[h margin=1 in, v margin=1 in]{geometry}
\usepackage{amssymb,amsfonts}
\usepackage[all,arc]{xy}
\usepackage{tikz-cd}
\usepackage{enumerate}
\usepackage{mathrsfs}
\usepackage{amsthm}
\usepackage{mathpazo}
\usepackage{yfonts}
\usepackage{enumitem}
\usepackage{mathrsfs}
\usepackage{fourier-orns}
\usepackage[all]{xy}
\usepackage{hyperref}
\usepackage{cite}
\usepackage{url}
\usepackage{mathtools}
\usepackage{graphicx}
\usepackage{pdfsync}
\usepackage{mathdots}
%
\usepackage{tgpagella}
\usepackage[T1]{fontenc}
%
\usepackage{listings}
\usepackage{color}

\definecolor{dkgreen}{rgb}{0,0.6,0}
\definecolor{gray}{rgb}{0.5,0.5,0.5}
\definecolor{mauve}{rgb}{0.58,0,0.82}

\lstset{frame=tb,
  language=Matlab,
  aboveskip=3mm,
  belowskip=3mm,
  showstringspaces=false,
  columns=flexible,
  basicstyle={\small\ttfamily},
  numbers=none,
  numberstyle=\tiny\color{gray},
  keywordstyle=\color{blue},
  commentstyle=\color{dkgreen},
  stringstyle=\color{mauve},
  breaklines=true,
  breakatwhitespace=true,
  tabsize=3
  }
%
%--------Theorem Environments--------
%
\newtheorem{thm}{Theorem}[section]
\newtheorem*{thm*}{Theorem}
\newtheorem{cor}[thm]{Corollary}
\newtheorem{prop}[thm]{Proposition}
\newtheorem{lem}[thm]{Lemma}
\newtheorem*{lem*}{Lemma}
\newtheorem{conj}[thm]{Conjecture}
\newtheorem{quest}[thm]{Question}
%
\theoremstyle{definition}
\newtheorem{defn}[thm]{Definition}
\newtheorem*{defn*}{Definition}
\newtheorem{defns}[thm]{Definitions}
\newtheorem{con}[thm]{Construction}
\newtheorem{exmp}[thm]{Example}
\newtheorem{exmps}[thm]{Examples}
\newtheorem{notn}[thm]{Notation}
\newtheorem{notns}[thm]{Notations}
\newtheorem{addm}[thm]{Addendum}
\newtheorem{exer}[thm]{Exercise}
%
\theoremstyle{remark}
\newtheorem{rem}[thm]{Remark}
\newtheorem*{claim}{Claim}
\newtheorem*{aside*}{Aside}
\newtheorem*{rem*}{Remark}
\newtheorem*{hint*}{Hint}
\newtheorem*{note}{Note}
\newtheorem{rems}[thm]{Remarks}
\newtheorem{warn}[thm]{Warning}
\newtheorem{sch}[thm]{Scholium}
%
%--------Macros--------
\renewcommand{\qedsymbol}{$\blacksquare$}
\renewcommand{\hom}{\mathsf{Hom}}
\renewcommand{\emptyset}{\varnothing}
\renewcommand{\O}{\mathscr{O}}
\newcommand{\R}{\mathbb{R}}
\newcommand{\ib}[1]{\textbf{\textit{#1}}}
\newcommand{\Q}{\mathbb{Q}}
\newcommand{\Z}{\mathbb{Z}}
\newcommand{\N}{\mathbb{N}}
\newcommand{\C}{\mathbb{C}}
\newcommand{\A}{\mathbb{A}}
\newcommand{\F}{\mathbb{F}}
\newcommand{\M}{\mathcal{M}}
\renewcommand{\S}{\mathbb{S}}
\newcommand{\V}{\vec{v}}
\newcommand{\RP}{\mathbb{RP}}
\newcommand{\CP}{\mathbb{CP}}
\newcommand{\B}{\mathcal{B}}
\newcommand{\GL}{\mathsf{GL}}
\newcommand{\SL}{\mathsf{SL}}
\newcommand{\SP}{\mathsf{SP}}
\newcommand{\SO}{\mathsf{SO}}
\newcommand{\SU}{\mathsf{SU}}
\newcommand{\gl}{\mathfrak{gl}}
\newcommand{\g}{\mathfrak{g}}
\newcommand{\inv}{^{-1}}
\newcommand{\bra}[2]{ \left[ #1, #2 \right] }
\newcommand{\ind}{\lambda \in \Lambda}
\newcommand{\set}[1]{\left\lbrace #1 \right\rbrace}
\newcommand{\abs}[1]{\left\lvert#1\right\rvert}
\newcommand{\norm}[1]{\left\lVert#1\right\rVert}
\newcommand{\transv}{\mathrel{\text{\tpitchfork}}}
\newcommand{\enumbreak}{\ \\ \vspace{-\baselineskip}}
\let\oldexists\exists
\renewcommand\exists{\oldexists~}
\let\oldL\L
\renewcommand\L{\mathfrak{L}}
\makeatletter
\newcommand{\tpitchfork}{%
  \vbox{
    \baselineskip\z@skip
    \lineskip-.52ex
    \lineskiplimit\maxdimen
    \m@th
    \ialign{##\crcr\hidewidth\smash{$-$}\hidewidth\crcr$\pitchfork$\crcr}
  }%
}
\makeatother
\newcommand{\bd}{\partial}
\newcommand{\lang}{\begin{picture}(5,7)
\put(1.1,2.5){\rotatebox{45}{\line(1,0){6.0}}}
\put(1.1,2.5){\rotatebox{315}{\line(1,0){6.0}}}
\end{picture}}
\newcommand{\rang}{\begin{picture}(5,7)
\put(.1,2.5){\rotatebox{135}{\line(1,0){6.0}}}
\put(.1,2.5){\rotatebox{225}{\line(1,0){6.0}}}
\end{picture}}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\im}{Im}
\DeclareMathOperator{\grap}{graph}
\DeclareMathOperator{\codim}{codim}
\DeclareMathOperator{\coker}{coker}
\DeclareMathOperator{\supp}{supp}
\DeclareMathOperator{\inter}{Int}
\DeclareMathOperator{\sign}{sign}
\DeclareMathOperator{\sgn}{sgn}
\DeclareMathOperator{\indx}{ind}
\DeclareMathOperator{\alt}{Alt}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\trace}{trace}
\DeclareMathOperator{\ad}{ad}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Ad}{Ad}
\DeclareMathOperator{\Lie}{Lie}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\dv}{div}
\DeclareMathOperator{\grad}{grad}
\newcommand*\myhrulefill{%
   \leavevmode\leaders\hrule depth-2pt height 2.4pt\hfill\kern0pt}
\newcommand\niceending[1]{%
  \begin{center}%
    \LARGE \myhrulefill \hspace{0.2cm} #1 \hspace{0.2cm} \myhrulefill%
  \end{center}}
\newcommand*\sectionend{\niceending{\decofourleft\decofourright}}
\newcommand*\subsectionend{\niceending{\decosix}}
\def\upint{\mathchoice%
    {\mkern13mu\overline{\vphantom{\intop}\mkern7mu}\mkern-20mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
    {\mkern7mu\overline{\vphantom{\intop}\mkern7mu}\mkern-14mu}%
  \int}
\def\lowint{\mkern3mu\underline{\vphantom{\intop}\mkern7mu}\mkern-10mu\int}
%
%--------Hypersetup--------
%
\hypersetup{
    colorlinks,
    citecolor=black,
    filecolor=black,
    linkcolor=blue,
    urlcolor=black
}
%
%--------Solution--------
%
\newenvironment{solution}
  {\begin{proof}[Solution]}
  {\end{proof}}
%
%--------Graphics--------
%
%\graphicspath{ {images/} }

\begin{document}
\author{Jeffrey Jiang}
\title{The Rising Sea: Categories and Sheaves}
\maketitle

These are some notes + exercises I've compiled working through the first $2$ chapters of Ravi Vakil's \emph{The Rising Sea}, with the main purpose being to gain some familiarity and comfort with categories and sheaves.
%
\section{Category Theory}
%
\begin{defn}
A \ib{category} $\mathscr{C}$ is a collection\footnote{Loosely speaking; there's some set-theoretic issues here, but it's not that important for us} of \ib{objects}, denoted $\mathsf{Ob}(\mathscr{C})$ and a collection\footnote{Again, ignoring set-theoretic problems} \ib{morphisms} $\hom(A,B)$\footnote{Vikhil uses $\mathsf{Mor}$, but we'll use the more standard notation of $\hom$} for every pair of objects $A,B \in \mathsf{Ob}(\mathscr{C})$ satisfying the following axioms:
\begin{enumerate}
\item Given morphisms $f: A \to B$ and $g: B \to C$, there is a unique map $g \circ f: A \to C$ that makes the following diagram commute
$$\xymatrix{
A \ar@/_1pc/[rr]_{g \circ f}\ar[r]^f & B \ar[r]^g & C
}$$
\item For every object $A \in \mathsf{Ob}(\mathscr{C})$, there exists an \ib{identity morphism} $\id_A \in \hom(A,A)$ such that for any morphisms $f: A \to B$ and $g: C \to A$, we have that $\id_A \circ f = f$ and $g \circ \id_A = g$
\end{enumerate}
A morphism $f: A \to B$ is an \ib{isomorphism} is there exists a morphism $g: B \to A$ such that $f \circ g = \id_B$ and $g \circ f = \id_A$. We then call $g$ the \ib{inverse} to $f$. Isomorphisms $A \to A$ are called \ib{automorphisms} of $A$.
\end{defn}
%
\begin{exmp}
The category of sets, often denoted $\mathsf{Set}$ has sets as its objects, and maps of sets as its morphisms.
\end{exmp}
%
\begin{exmp}
Vector spaces over a field $\F$ also form a category, denoted $\mathsf{Vec}_\F$, where the objects are $\F$-vector spaces, and the morphisms are $\F$-linear maps.
\end{exmp}
%
\begin{exer}
Let $A$ be an object of a category $\mathscr{C}$. Show that the automorphisms of $\hom(A,A)$ form a group, called the \ib{Automorphism group} of $A$. Show that two isomorphisc objects in $\mathscr{C}$ have isomorphic automorphism groups.
\end{exer}
%
\begin{proof}
Verifying that $\Aut(A)$ is a group is mainly an exercise in definition chasing. Associativity comes from the category axioms, the identity element is the identity morphism, and inverses exist by the definition of the automorphism group.

For the second part, let $A,B \in \mathsf{Ob}(\mathscr{C})$ be isomorphic, with $f: A \to B$ an isomorphism. We then define a map $f^*: \Aut(B) \to \Aut(A)$ where $f^*\sigma = f\inv \circ \sigma \circ f$. This is clearly a group homomorphism, and is an isomorphism with inverse given by $(f\inv)^*$.
\end{proof}
%
Now that we have categories, the natural thing to study are maps of categories.
%
\begin{defn}
A (covariant) \ib{functor} $\mathcal{F}$ from a category $\mathscr{C}$ to another category $\mathscr{D}$ assigns each object $A \in \mathsf{Ob}(\mathscr{C})$ an object $\mathcal{F}(A) \in \mathsf{Ob}(\mathscr{D})$ and to each map $f:A \to B$ in $\mathscr{C}$ a map $\mathcal{F}(f) : \mathcal{F}(A) \to \mathcal{F}(B)$ such that $\mathcal{F}$ respects composition, i.e.
$$\mathcal{F}(f \circ g) = \mathcal{F}(f) \circ \mathcal{F}(g) $$
a \ib{contravariant functor} can be defined similarly, except it reverses the arrows, i.e. $\mathcal{F}(f)$ is now a map $B \to A$, rather than $A \to B$.
\end{defn}
%
\begin{exmp}
For mathematical objects that are just sets with extra structure (e.g. vector spaces, groups, rings, etc), the \ib{forgetful functor} is the functor that takes each object to its underlying set, and each map to itself (thought of as a map of sets). Categories that admit a forgetful functor into $\mathsf{Set}$ are called \ib{concrete categories}.
\end{exmp}
%
\begin{exmp}[\ib{The functor of points}]
For a category $\mathscr{C}$, fix an object $A \in \mathsf{Ob}(\mathscr{C})$. We use this to define the functor $\mathcal{F}_A: \mathscr{C} \to \mathsf{Set}$, where for $B \in \mathsf{Ob}(\mathscr{C})$, we let $\mathcal{F}(B) = \hom(B,A)$ and for $f: B \to C$, we let $\mathcal{F}_A(f): \hom(C,A) \to \hom(B,A)$ be the map where $\mathcal{F}_A(f)(g) = g \circ f$.
\end{exmp}
Like functions, we can compose functors $\mathcal{F}: \mathscr{A} \to \mathscr{B}$ and $\mathcal{G}:  \mathscr{B} \to \mathscr{C}$ to obtain $\mathcal{G} \circ \mathcal{F}: \mathscr{A} \to \mathscr{C}$, where for $A \in \mathsf{Ob}(\mathscr{A})$, we have that $\mathcal{G} \circ \mathcal{F}(A) = \mathcal{G}(\mathcal{F}(A))$, and the same thing for morphisms in $\mathscr{A}$. Also like functions, we have notions of injectivity and surjectivity.
%
\begin{defn}
A covariant functor $\mathcal{F}: \mathscr{C} \to \mathscr{D}$ is \ib{faithful} if the induced map $\hom_{\mathscr{C}}(A,B) \to \hom_{\mathscr{D}}(\mathcal{F}(A),\mathcal{F}(B))$ is injective and \ib{full} if it surjective.
\end{defn}
%
\begin{exmp}
The forgetful functor $\mathsf{Vec}_k \to \mathsf{Set}$ is not full, since there are more maps of sets than there are maps of vector spaces, since an element of $\hom_{\mathsf{Set}}(V,W)$ need not be linear. However, the ``inclusion" functor $i: \mathsf{Ab} \to \mathsf{Grp}$ from abelian groups into groups is full. Given two abelian groups $G$ and $H$, we clearly have that $\hom_{\mathsf{Ab}}(G,H) = \hom_{\mathsf{Grp}}(G,H)$, so we have that $i$ is a faithful functor as well.
\end{exmp}
Functors in a lot of ways act just like functions, but there's some more things we can do with them. For example, it some sense, we can have maps between functors.
\begin{defn}
Given covariant functors $\mathcal{F},\mathcal{G}: \mathscr{A} \to \mathscr{B}$, a \ib{natural transformation} $\mathcal{F} \to \mathcal{G}$ assigns each object $A \in \mathsf{Ob}(\mathscr{A})$ a morphism $m_A : \mathcal{F}(A) \to \mathcal{G}(A)$, such that for every morphism $f: A \to B$ in $\mathscr{A}$, the following diagram commutes
$$\xymatrix{
\mathcal{F}(A) \ar[r]^{\mathcal{F}(f)} \ar[d]_{m_A} & \mathcal{F}(B) \ar[d]^{m_B} \\
\mathcal{G}(A) \ar[r]_{\mathcal{G}(f)} & \mathcal{G}(B)
}$$
a \ib{natural isomorphism} is when all the given morphisms $m_A$ are isomorphisms.
\end{defn}
%
\begin{exmp}
A trivial example of a natural transformation between $\mathcal{F} \to \mathcal{G}$ assigns the zero map $z:\mathcal{F}(A) \to \mathcal{G}(A)$ for every object $A$. Such a zero map only exists in some categories, such as $\mathsf{Vec}_k$ and $\mathsf{Grp}$.
\end{exmp}
This gives a rigorous definition for the words ``canonical" and ``natural" that get thrown around a bit too often. The prototypical example for this idea is the natural isomorphism from a finite dimensional vector space to its double dual.
%
\begin{exer}
Let $\mathcal{D}: \mathsf{Vec}_k \to \mathsf{Vec}_k$ be the functor that maps each $k$-vector space $V$ to its dual space $V^*$ of linear functions $V \to k$ and maps a linear map $A: V \to W$ to its pullback (sometimes called the transpose) $A^*: W^* \to V^*$. Show that the double dual functor $\mathcal{D} \circ \mathcal{D}$ is naturally isomorphic to the identity functor $\id$.
\end{exer}
%
\begin{proof}
For a vector $v$ in a vector space $V$, define the map $\xi_v: V^* \to k$ by $\xi_v(\omega) = \omega(v)$. The let $\Xi_V: V \to V^{**}$ be the map that sends $v \mapsto \xi_v$. We claim that the morphisms $\Xi_V$ define a natural isomorphism from $\mathcal{D} \circ \mathcal{D}$ to $\id$. We first show that $\Xi_V$ defines an isomorphism. Since $V$ and $V^{**}$ are the same dimension, it suffices to check that $\Xi_V$ has trivial kernel. Suppose $v \mapsto \xi_v = 0$. Then $\omega(v) = 0$ for all $\omega \in V^*$, which is only true when $v = 0$. Therefore, $\Xi_V$ is an isomorphism for every $V$. Showing that the $\Xi_V$ define a natural isomorphism now amounts to showing that the following diagram commutes
$$\xymatrix{
V \ar[r]^A \ar[d]_{\Xi_V} & W \ar[d]^{\Xi_W} \\
V^{**} \ar[r]_{A^{**}} & W^{**}
}$$
which amounts to showing that $\Xi_W \circ A = A^{**} \circ \Xi_V$. Let $v \in V$ and $\omega \in W^*$. Then we compute
\begin{align*}
(\Xi_W \circ A)(v)(\omega) &= \Xi_W(Av)(\omega) \\
&= \xi_{Av}(\omega) \\
&= \omega(Av)
\end{align*}
We also compute
\begin{align*}
(A^{**} \circ \Xi_V)(v)(\omega) &= A^{**}\xi_v(\omega) \\
&= \xi_v(A^{*}\omega) \\
&= A^{*}\omega(v) \\
&= \omega(Av)
\end{align*}
So we have given a natural isomorphism $\mathcal{D} \circ \mathcal{D} \to \id$
\end{proof}
%
It's also somewhat easy in this language why there is no natural isomorphism from a vector space to its dual. When you saw it, there was most likely some hand-waving about how the choice of a basis made the isomorphism unnatural, so we can make this rigorous now.
%
\begin{prop}
There exists no natural isomorphism from the dual functor $\mathcal{D}$ to the identity functor $\id$
\end{prop}
%
\begin{proof}
%
Suppose such a natural isomorphism existed, and assigned each vector space an isomorphism $\varphi_V: V \to \V^*$ such that the following diagram commutes for any linear map $A: V \to W$.
$$\xymatrix{
V \ar[d]_{\varphi_V}\ar[r]^A & W \ar[d]^{\varphi_W} \\
V & W \ar[l]^{A^*}
} $$
If we let $A$ be the zero map, we have that $A^* \circ \varphi_W \circ A = 0$, so it cannot be $\varphi_V$.
\end{proof}
%
One product from category theory that ends up being extremely useful is the notion of a \ib{universal property}. One example you may have seen before is the universal property of a product-- Given two objects $A,B$ in some category $\mathscr{C}$, their product, denoted $A \times B \in \mathsf{Ob}(\mathscr{C})$ is (up to unique isomorphism) the unique object with maps $\pi_A: A\times B \to A$ and $\pi_B : A \times B \to B$ such that given any pair of maps $f: P \to A$ and $g: P \to B$ factor uniquely through $A \times B$, i.e. there exists a unique map $f \times g: P \to A\times B$ such that the following diagram commutes
$$\xymatrix{
P \ar[dr]_{f \times g} \ar[d]_g \ar[r]^f & A \\
B & A \times B \ar[l]^{\pi_B} \ar[u]^{\pi_A}
}$$
Some other useful objects defined by universal properties
%
\begin{defn}
An \ib{initial object}  $I$ in a category $\mathscr{C}$ if there exists exactly one map $I \to A$ for every $A \in \mathsf{Ob}(\mathscr{C})$. A \ib{final object} is an object $F$ in which there exactly one map $A \to F$ for every object $A$. An object $Z$ is a \ib{zero object} if it is both an initial and final object.
\end{defn}
%
\begin{exer}
Show any two initial objects are uniquely isomorphic. Show any two final objects are uniquely isomorphic
\end{exer}
%
\begin{proof}
Let $A,B$ be initial objects. We note that the definition of an initial object implies that the only map $A \to A$ and $B \to B$ must be $\id_A$ and $\id_B$ respectively. Therefore, the unique maps $A \to B$ and $B \to A$ must compose to identity, so they are isomorphisms.

The same proof applies to final objects. For final objects the unique maps $A \to A$ and $B \to B$ are necessarily the identity maps, and the unique maps $A \to B$ and $B \to A$ must compose to identity.
\end{proof}
For concreteness, we should determine what these some of objects are
\begin{exer}
What are the initial/final objects in $\mathsf{Set},\mathsf{Ring}$\footnote{Since this book is for algebraic geometry, all rings are commutative and unital. Ring maps are required to map $1 \mapsto 1$} and $\mathsf{Top}$?
\end{exer}
%
\begin{proof}[Solution]\enumbreak
\begin{enumerate}
\item The initial object for $\mathsf{Set}$ is the empty set. Given any set $S$, we have a unique map $\emptyset \to S$ (the empty map). The final object is the single point set $*$. Given any set $S$, there exists only a single map to $*$, namely the map that takes all of $S$ to the point. We note that the empty set cannot be a final object, since we cannot map a nonempty set to an empty set.
\item The initial object in $\mathsf{Ring}$ is the integers $\Z$. Given any commutative unital ring $R$ (which from now on we'll just say ring), the unique map $\Z \to R$ is entirely determined by the map $1 \mapsto 1$ since $1$ generates $\Z$ as an abelian group. The final object is the zero ring $0 = 1$, where the unique map $R \to 0$ is the map that sends everything to $0$.
\item The initial and final objects for $\mathsf{Top}$ are the same as for $\mathsf{Set}$. We note that the empty set and a single point set have unique topologies, so we do not need to specify a topology.
\end{enumerate}
\end{proof}
One reason that universal properties are nice is that they give an extremely helpful way in proving that some object is the one we desire -- by showing it satisfies the universal property. Given an arbitrary set $P$, how can I conclude that it is the product $A \times B$? We can look for an explicit isomorphism, which can be difficult, or we can simply show that it satisfies the same universal property as the product. Another good example of a universal property comes from an important concept in algebraic geometry -- the localization of a ring.
\begin{exmp}[\ib{Localization of a ring}]
Given a ring $R$ and a multiplicative subset $S \subset R$ (a set closed under multiplication that contains $1$). We can then define the ring $S\inv R$ to be the set of formal fractions $\set{r/s ~:~ r \in R, s \in S}$ modulo the equivalence relation $\sim$ where $r/s \sim p/q$ if and only if there exists $t \in S$ such that $t(qr - sp) = 0$\footnote{This might look strange if you compare it to the fractions you know in $\Q$, but special care needs to be taken in the case that $R$ contains zero divisors}. Addition and multiplication of fractions is exactly the same as in $\Q$, namely $r/s + p/q = (rq + ps)/pq$ and $r/s \cdot p/q = rp/sq$. We then have a canonical map $R \to S\inv R$ where $r \mapsto r/1$
\end{exmp}
%
\begin{exer}
Show the canonical map $R \to S\inv R$ is injective if and only if $S$ contains no zero divisors.
\end{exer}
%
\begin{proof}
Suppose there exists two distinct elements $p,q$ that map to the same element, i.e. $p/1 \sim q/1$. This means that there exists some $s \in S$ such that $s(p-q) = 0$, which is true if and only if $s$ is a zero divisor for the nonzero element $p-q$.
\end{proof}
%
\begin{exer}
Show that $S\inv R$ satisfies the following universal property: $S\inv R$ is initial among $R$-algebras $A$ where every element of $S$ is mapped to a invertible element. In other words any map $R \to A$ in which every element is mapped to an invertible element factors uniquely through the map $R \to S\inv R$.
\end{exer}
%
\begin{proof}
Let $\varphi : R \to A$ be such a map where every element of $S$ maps to an invertible element. The we want to find a map $\tilde{\varphi}: S\inv R \to A$ such that the following diagram commutes
$$\xymatrix{
R \ar[d]_{\iota}\ar[r]^{\varphi} & A \\
S\inv R \ar[ur]_{\tilde{\varphi}}
}$$
where $\iota : R \to S\inv R$ is the canonical map. We note that in order for the diagram to commute, we must necessarily have that $\tilde{\varphi}(r/1) = \varphi(r)$ for every $r \in R$. Therefore, the only possible mapping for $\tilde{\varphi}$ must be $\tilde{\varphi}(r/s) = \varphi(r) / \varphi(s)$, which is possible since $\varphi(s)$ is invertible, so we have found our unique map.
\end{proof}
You can localization for $R$-modules $M$ as well. Let's define it in terms of a universal property this time. Let $S\inv M$ be the $R$-module equipped with the map $\varphi : M \to S\inv M$ where any map $f: M \to N$ such that scalar multiplication $M_s: N \to N$ is an isomorphism factors through $S\inv M$ as a unique map $\tilde{f}: S\inv M \to N$, i.e. the following diagram commutes
$$\xymatrix{
M \ar[d]_{\varphi}\ar[r]^f & N \\
S\inv M \ar[ur]_{\tilde{f}}
}$$
%
\begin{exer}
Prove that the localization $(S\inv M, \varphi)$ exists.
\end{exer}
%
\begin{proof}
Define the localization $S\inv M$ similarly to $S\inv R$ as the set
$$\set{\frac{m}{s} ~:~ m \in M s \in S} / \sim $$
modulo the relation $\sim$ where $m/s \sim n/p$ if there exists $t \in S$ such that $t(mp - ns) = 0$, and let $\varphi$ be the map $m \mapsto m / 1$. We claim that this satisfies the universal property given above. Let $f: M \to N$ be a map of modules where $S$ acts on $N$ by isomorphisms. Then define $\tilde{f}: S\inv M \to N$ by $\tilde{f}(m/s) = 1/s \cdot f(m)$, where $1/s$ is the inverse to the multiplication map $m_s: R \to R$, which is defined since scalar multiplication by $s$ defines an isomorphism $N \to N$. It is clear that the diagram commutes, so the set and map we gave satisfies the universal property.
\end{proof}
%
Another example is the tensor product $\otimes$, where given $R$-modules $M$ and $N$, we can form $M \otimes_R N$ as the set of sums formal symbols $m \otimes n$ where $m \in M$ and $n \in N$ where $\otimes$ is bilinear, i.e. $(am_1 + bm_2) \otimes n = am_1 \otimes + bm_2 \otimes n$ and $m \otimes (an_1 + bn_2) = am\otimes n_1 + bm\otimes n_2$.
%
\begin{exer}
Show that $Z/10\Z \otimes_\Z Z/12\Z \cong Z/2\Z$.
\end{exer}
%
\begin{proof}
Let $[a]_{10}$ denote the equivalence class of $a \in Z$ in $\Z/10\Z$ and define $[a]_{12}$ similarly. Then define the map $\varphi: \Z/10\Z \otimes_\Z \Z/12\Z \to \Z/2\Z$ by $[a]_{10} \otimes [b]_{12} \mapsto [ab]_2$ and extending linearly to sums. This is clearly surjective and $\Z$-linear, so to show that $\varphi$ is an isomorphism, we show that the kernel is trivial. To show this, it suffices to check elements of the form $[a]_{10} \otimes [b]_{12}$. Suppose we have $[a]_{10} \otimes [b]_{12} \mapsto 0$. Noting that $[a]_{10} = a[1]_{10}$, and the same for $[b]_{12}$. Therefore, we have that $[a]_{10} \otimes [b]_{12} = ab([1]_{10} \otimes [1]_{12})$. Therefore in order for $\varphi([a]_{10} \otimes [b]_{12}) = 0$, we must have $ab = 0$, since $[1]_{10} \otimes [1]_{12} \mapsto [1]_2$. Therefore, $[a]_{10} \otimes [b]_{12} = 0$, so the kernel is trivial.
\end{proof}
%
\begin{exer}
Fix an $R$-module $N$. Define a functor $\mathcal{N}: \mathsf{Mod}_R \to \mathsf{Mod}_R$ by $\mathcal{N}(M) = M \otimes_R N$, and for any map $\varphi : A \to B$, let $\mathcal{N}(\varphi) : A\otimes_R N \to B\otimes_R N$ be the map defined by $\mathcal{N}(\varphi)(a \otimes n) = \varphi(a) \otimes n$. Show that $\mathcal{N}$ is indeed a covariant functor, and that it is \ib{right-exact}, i.e. if we are given a short exact sequence of $R$-modules
$$0 \to A \to B \to C \to 0 $$
the corresponding sequence
$$0 \to A \otimes_R N \to B \otimes_R N \to C \otimes_R N $$
is also exact.
\end{exer}
%
\begin{proof}
To show that $\mathcal{N}$ defines a functor, all we need to show is that it respects composition. Let $\varphi: A \to B$ and $\psi: B \to C$. Then we need to show that $\mathcal{N}(\psi \circ \varphi) = \mathcal{N}(\psi) \circ \mathcal{N}(\varphi)$. To show this, it suffices to show that they agree on elements of the form $a \otimes n$. We compute
$$ \mathcal{N}(\psi \circ \varphi)(a \otimes n) = (\psi \circ \varphi)(a) \otimes n = \mathcal{N}(\psi \circ \varphi)(a \otimes n) $$
so $\mathcal{N}$ is a functor.

We now show that $\mathcal{N}$ is right exact. Let
$$\xymatrix{
0 \ar[r] & A \ar[r]^\varphi & B \ar[r]^\psi & C \ar[r] & 0
}$$
be exact, i.e. $\ker\psi = \im\varphi$, $\varphi$ is injective, and $\varphi$ is surjective. We want to show that
$$\xymatrix{
0 \ar[r] & A \otimes_R N \ar[r]^{\mathcal{N}(\varphi)} & B \otimes_R N \ar[r]^{\mathcal{N}(\psi)} & C \otimes_R N \ar[r] & 0
}$$
Is also exact, i.e. $\mathcal{N}(\varphi)$ is injective, $\ker\mathcal{N}(\psi) = \im\mathcal{N}(\varphi)$, and $\mathcal{N}(\psi)$ is surjective. We note that if $\mathcal{N}(\varphi)(a \otimes n) = 0$, then this means that $\varphi(a) \otimes n = 0$, which means either $\varphi(a) = 0$ or $n = 0$. Since $\varphi$ is injective, this implies that either $a$ or $n$ is $0$, so $a \otimes n = 0$. Therefore, $\mathcal{N}(\varphi)$ is also injective. Next, we want to show that $\mathcal{N}(\varphi)$ surjects onto $\ker\mathcal{N}(\psi)$. To do this, we first characterize the elements in $\ker\mathcal{N}(\psi)$. Suppose $\mathcal{N}(\psi)(b \otimes n) = \psi(b) \otimes n = 0$. Then we must have that either $\psi(b) = 0$ or $n = 0$. Therefore, the kernel of $\mathcal{N}(\psi)$ is exactly $\ker\psi \otimes_R N$. We note that the image of $\mathcal{N}(\varphi)$ is exactly $\im\varphi \otimes N$, and since the original sequence is exact, this gives us that $\im\mathcal{N}(\varphi) = \ker\mathcal{N}(\psi)$. Finally, we must show that $\mathcal{N}(\psi)$ is surjective.  We note that the image of $\mathcal{N}(\psi)$ is exactly $\im\psi \otimes_R N = C \otimes_R N$ since $\psi$ was surjective. Therefore, the sequence is exact.
\end{proof}
The characterization we gave for the tensor product $A \otimes B$, while not wrong, is pretty inelegant, and obfuscates the real reason we like tensor products. It is much better to define the tensor product in terms of the universal property it satisfies. In this case, given $R$-modules $A,B$, the tensor product $A \otimes B$ is an $R$-module equipped with a bilinear map $\varphi: A\times B \to A \otimes B$  such that for any bilinear map $\psi: A \times B \to C$, it factors uniquely as a linear map $A \otimes B$, i.e. the following diagram commutes
$$\xymatrix{
A\times B \ar[r]^\psi \ar[d]_{\varphi} & C \\
A \otimes B \ar[ur]
}$$
So the tensor product is another $R$-module in which linear maps are equivalent to bilinear maps out of $A \times B$. The construction we gave above equivalent, with the map $\varphi$ being given by the mapping $(a,b) \mapsto a \otimes b$.
%
\begin{exer}\enumbreak
\begin{enumerate}
\item Let $M$ be an $A$ module, and let $\varphi : A \to B$ be a ring homomorphism. GIve $B \otimes_A M$ the structure of a $B$-module. Show that this defines a functor $\mathsf{Mod}_A \to \mathsf{Mod}_B$.
\item Furthermore, if we are given another ring homomorphism $\rho : A \to C$, show that we can endow $B \otimes_A C$ the structure of a ring.
\end{enumerate}
\end{exer}
%
\begin{proof}\enumbreak
\begin{enumerate}
\item We note that the homomorphism $\varphi: A \to B$ gives $B$ the structure of an $A$-module where the scalar multiplication is given by $a \cdot b = \varphi(a)b$, so it makes sense to construct $B \otimes_A M$. To make $B \otimes_A M$ a $B$-module, we just need to specify a scalar multiplication by $B$. Let $b \otimes m \in B \otimes_A M$, and let $\lambda \in B$. Let
$$\lambda \cdot b \otimes m = \lambda b \otimes m$$
and extending linearly to sums. By definition this distributes over the addition of $B \otimes_A M$ as an $A$-module, so this makes it a $B$-module as well. We note by the previous exercise, tensoring with a fixed $A$-module (in this case $B$), defines an functor.
\begin{rem*}
This process is commonly referred to as \ib{extension of scalars}, especially when the map $\varphi$ is like an inclusion, e.h. $\R \hookrightarrow \C$. In that case, this process takes a real vector space and complexifies it into a complex vector space.
\end{rem*}
\item Let addition on $B \otimes_A C$ be the standard addition as $A$-modules. Then we define multiplication as
$$(b_1\otimes c_1)(b_2 \otimes c_2) = b_1b_2 \otimes  c_1c_2$$
and extending linearly to sums, which covers distributivity. In addition, multiplication is commutative since $B$ and $C$ are commutative, so this forms a ring.
\end{enumerate}
\end{proof}
%
\begin{exer}
Let $S$ be a multiplicative subset of $A$, and let $M$ be an $A$-modules. Describe a natural isomorphism $(S\inv A) \otimes_A M \cong S\inv M$.
\end{exer}
%
\begin{proof}
We already have that the assignment $M \mapsto (S\inv A) \otimes_A M$ defines a functor, and it is simple to check that the assignment $M \mapsto S\inv M$ also defines a functor, so we are looking for isomorphisms $\varphi_M : (S\inv A)\otimes_A M \to S\inv M$ such that the following diagram commutes for any $A$-module homomorphism $\psi : M \to  N$
$$\xymatrix{
(S\inv A) \otimes_A M \ar[d]_{\varphi_M }\ar[r]^{\tilde{\psi}} & (S\inv A) \otimes_A  N \ar[d]^{\varphi_N} \\
S\inv M \ar[r]^{\bar{\psi}} & S\inv N
}$$
Where $\tilde{\psi}$ denotes the map where $r/s \otimes m \mapsto r/s \otimes \psi(m)$ and $\bar{\psi}$ denotes the map where $m/s \mapsto \psi(m)/s$. Define $\varphi_M (S\inv A) \otimes_A \to S\inv M$ by
$$\frac{r}{s} \otimes m \mapsto \frac{rm}{s} $$
we note that the kernel is trivial, since $rm/s = 0$ if and only if $r = 0$ or $m = 0$. In addition, the map is surjective, since we have that $1/s \otimes m \mapsto m/s$, so this defines an isomorphism. Finally, to show that the diagram commutes, we want to show that $\varphi_N \circ \tilde{\psi} = \bar{\psi} \circ \varphi_M$. We compute
\begin{align*}
(\varphi_N \circ \tilde{\psi})(r/s \otimes m) &= \varphi_N(r/s \otimes \psi(m)) \\
&= r\psi(m)/s \\
(\bar{\psi} \circ \varphi_M)(r/s \otimes m) &= \tilde{psi}(rm/s) \\
&=  \psi(rm) /s \\
&= r\psi(m)/s
\end{align*}
So the diagram commutes, and we have specified a natural isomorphism.
\end{proof}
%
\begin{exmp}[\ib{Fibered products}]
In any category, suppose we have morphisms $\alpha : X \to Z$ and $\beta : Y \to Z$. The \ib{fibered product} is another object, denoted $X \times_Z Y$ equipped with maps $\pi_X : X \times_Z \to X$ and $\pi_Y: X \times_Z Y \to Y$ such that $\alpha \circ \pi_X = \beta \circ \pi_Y$, and for any object $W$ with maps $W \to X$ and $W \to Y$ whose compositions with $\alpha$ and $\beta$ agree, there exists a unique map $W \to X \times_Z Y$. This is summarized by the following commutative diagram
$$\xymatrix{
W \ar[rr]\ar[dd] \ar@{-->}[dr] & &Y \ar[dd]_{\beta}\\
& X \times_Z Y \ar[dl]_{\pi_X} \ar[ur]^{\pi_Y} \\
X \ar[rr]_{\alpha} & & Z
}$$
In many cases where the maps $\alpha$ and $\beta$ are clear, they are omitted, and we refer to the fibered product as just $X \times_Z Y$. The commutative square
$$\xymatrix{
X \times_Z Y \ar[d]_{\pi_Y} \ar[r]^{\pi_X} & X \ar[d]^\alpha \\
Y \ar[r]_\beta & Z
}$$
is often refereed to a Cartesian diagram/square.
\end{exmp}
%
\begin{exer}
Show that in the category $\mathsf{Set}$, the fibered product is given by
$$X \times_Z Y = \set{(x,y) \in X \times Y ~:~ \alpha(x) = \beta(y)} $$
\end{exer}
%
\begin{proof}
It suffices to show that this satisfies the universal property described above. Suppose we are given a set $W$ with maps $f: W \to X$ and $g: W \to Y$ such that $\alpha \circ f = \beta \circ g$. Then we have a map $\varphi: W \to X\times_Z Y$ where $\varphi(w) = (f(w),g(w))$, which lands in $X \times_Z Y \subset X \times Y$ by the definition, and visibly makes the diagram above commute.
\end{proof}
%
\begin{exer}
Let $X$ be a topological space, and show that the fibered product always exsits in the category of open sets of $X$ by describing what it is
\end{exer}
%
\begin{proof}
We recall that the category of open sets is the category where the objects are open sets of $X$, with a unique arrow existing between open sets $U$ and $V$ if $U \subset V$. Then let $A,B,C$ be open sets of $X$, where we have arrows $A \to C$ and $B \to C$, which in more standard language means that $A \subset C$ and $B \subset C$. Then for any $W$ such that $W \subset A$ and $W \subset B$, there must exist an arrow $W \to A \times_C B$ so $W \subset A \times_C B$, and we have that $A \times_C B \subset A$ and $A \times_C B \subset B$. Therefore, $A \times_C B = A \cap B$
\end{proof}
%
\begin{exer}
Let $Z$ denote the final object in a category. Assuming a relevant fibered products exist, show that for any objects $X,Y$, the fibered product $X \times_Z Y$ is uniquely isomorphic to the product $X \times Y$.
\end{exer}
%
\begin{proof}
We note that since there only exists a single map $X \to Z$ and $Y \to Z$, we don't need to specify the maps. Let $X \times Y$ be the product (in the categorical sense). Then by the universal property, we have maps $\pi_X$ and $\pi_Y$ such that for any object $P$ with maps $f: P \to X$ and $g: P \to Y$, we get a map $f \times g: P \to X \times Y$. We note that these maps also satisfy the condition for a map to exists from $P \to X \times_Z Y$. We then know that there exists a unique map $X \times Y \to Z$, since $Z$ is a final object. Then since all maps to $Z$ must compose to the unique map to $Z$, we have that $X \times Y$ satisfies the universal property, so it must be the fibered product as well.
\end{proof}
%
\begin{exer}
Show that if the two squares in the following diagrams are commutative, then the outer rectangle is commutative as well
$$\xymatrix{
U \ar[d]\ar[r] & V \ar[d] \\
W \ar[d] \ar[r] & X \ar[d] \\
Y  \ar[r] & Z
}$$
\end{exer}
%
\begin{proof}
Showing that the outer rectangle commutes equates to proving that the composition $U \to W \to Y \to Z$ is the same as $U \to V \to X \to Z$. From the commutativity of the upper square, we have that $U \to W \to X \to Z$ is the same as $U \to V \to X \to Z$. Then from commutativity of the lower square, we have that $W \to X \to Z$ is the same as $W \to Y \to Z$, so $U \to V \to X \to Z$ is the same as $U \to W \to Y \to Z$, proving commutativity of the outer rectangle.
\end{proof}
%
\begin{exer}
Given morphisms $X_1 \to Y$, $X_2 \to Y$, and $Y \to Z$, show there is a natural map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$, assuming these fibered products exist.
\end{exer}
%
\begin{proof}
By composing the maps $X_i \to Y \to Z$, we get two maps with which we can construct the fibered product $X _1\times_Z X_2$. We then note that the projection maps $X_1 \times_Y \times X_2 \to X_i$ satisfy the condition that their composition with the maps $X_i \to Y \to Z$ are the same, so we get a map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$.
\end{proof}
\begin{exer}[\ib{The magic diagram}]
Given maps $X_i \to Y$ and $Y \to Z$, show that the following diagram commutes, assuming all relevant fibered products exist
$$\xymatrix{
X_1 \times_Y X_2 \ar[d] \ar[r] & X_1 \times_Z X_2 \ar[d] \\
Y \ar[r] & Y \times_Z Y
}$$
\end{exer}
%
\begin{proof}
We first do some bookkeeping to figure out what each map is. The map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$ is the map discussed in the exercise above. The map $X_1 \times_Y X_2 \to Y$ is either $\alpha \circ \pi_{X_1}$ or $\beta \circ \pi_{X_2}$, which are the same by the definition of the fibered product, where $\alpha$ and $\beta$ are the maps $X_i \to Y$, the map $X_1 \times_A \to X_2 \to Y \times_Z Y$ is the one induced by the composition of the projection maps with $\alpha$ and  $\beta$, and the map $Y \to Y \times_Z Y$ is the one obtained by factoring the identity map $\id_Y$ through the fibered product.

Then to prove that the diagram commutes, we appeal to the previous exercise, by providing two squares that commute. Consider the diagram
$$\xymatrix{
X_1 \times_Y X_2 \ar[r] \ar[d] & X_1 \times_Z X_2 \ar[d] \\
X_1 \ar[d] \ar[r] & X_1 \ar[d] \\
Y \ar[r] & Y \times_Z Y
}$$
Where the middle map $X_1 \to X_1$ is the identity map. Then we want to show both of the squares commute. For the upper square, we note that the map $X \times_Y X_2 \to X_1 \times_Z X_2$ is the one obtained by factoring the projection maps $X_1 \times_Z X_2 \to X_i$, which gives the following commutative diagram
$$\xymatrix{
X_1 \times_Y X_2  \ar[dr] \ar[drr] \ar[ddr]\\
& X_1 \times_Z X_2 \ar[r] \ar[d] & X_2 \ar[d]\\
& X_1 \ar[r] & Y
}$$
which gives us commutativity of the upper square. For the lower square, we note that the identity map on $Y$ gives us a map $Y \to Y \times_Z Y$, and that the map $X_1 \to Y$ trivially commutes with the identity map, so it gives us a map $X_1 \to Y \times_Z Y$, so mapping $X_1 \to Y \to Y\times_Z Y$ is the same as going straight $X_1 \to Y \times_Z Y$.
\end{proof}
A lot of constructions of objects in category theory come from taking the universal property of another object, and flipping all of the arrows to get a ``dual" object. To reflect this, we usually take the old object and slap ``co-" to the front\footnote{What is coffee? It's ffee with all the arrows reversed!}.
\begin{defn}
Define the \ib{coproduct} by taking the universal property for the product and flipping all of the arrows. That is, given two objects $X,Y$, the coproduct, denoted $X \coprod Y$, is another object equipped with maps $X \to X \coprod Y$ and $Y \to X \coprod Y$ such that for any object $C$ with maps $X \to C$ and $Y \to C$, there exists a unique map $X \coprod Y \to C$ such that the following diagram commutes
$$\xymatrix{
C \\
& X \coprod Y \ar[ul] & Y \ar[l] \ar[ull] \\
& X \ar[u] \ar[uul]
}$$
\end{defn}
%
\begin{defn}
Let $X,Y,Z$ be objects, and we are given maps $Z \to X$ and $Z \to Y$, then the fibered coproduct $X \coprod_Z Y$ is an object equipped with maps $X \to X \coprod_Z Y$ and $Y \to X \coprod_Z Y$ such that given another object $W$ with maps $X \to W$ and $Y \to W$ such that their compositions $Z \to W$ agree, the map factors through to a map $X \coprod_Z Y \to W$, such that the following diagram commutes
$$\xymatrix{
Z \ar[d] \ar[r] & Y \ar[d] \ar[ddr]\\
X \ar[r] \ar[drr] & X \coprod_Z Y  \ar[dr]\\
& & W
}$$
\end{defn}
%
\begin{exer}
Show that the disjoint union is the coproduct in $\mathsf{Set}$.
\end{exer}
%
\begin{proof}
Let $X$ and $Y$ be sets, and let $X \sqcup Y$ be the disjoint union, which is equipped with the inclusion maps $X \hookrightarrow X \sqcup Y$ and $Y \hookrightarrow X \sqcup Y$. Then given any maps $f: X \to Z$ and $g: Y \to Z$, we get a map $X \sqcup Y \to Z$ given by $f$ and $g$ on the disjoint components $X$ and $Y$, showing that the disjoint union satisfies the universal property.
\end{proof}
%
\begin{exer}
Suppose we have ring homomorphisms $A \to B$ and $A \to C$ (giving $B$ and $C$ the structure of $A$-modules). From a previous exercise. $B \otimes_A C$ has a ring structure. Show that there is a ring homomorphism $B \to B \otimes_A C$ defined by $b \mapsto b \otimes 1$ (which also exists for $C$). Show this gives a fibered coproduct in $\mathsf{Ring}$, i.e. the diagram
$$\xymatrix{
B \otimes_A C & C \ar[l] \\
B \ar[u] & A \ar[l] \ar[u]
}$$
satisfies the universal property of a fibered coproduct.
\end{exer}
%
\begin{proof}
We first verify that the mapping $b \mapsto b \otimes 1$ is a ring homomorphism. By the bilinearity of $\otimes$, we get that $(b_1 + b_2) \otimes 1 = b_1 \otimes 1 + b_2 \otimes 1$, and that $rb \otimes 1 = r(b \otimes 1)$, so this is a ring homomorphism. The same proof goes for the map $C \to B \otimes_A C$.

Then let $R$ be another ring with ring homomorphisms $\varphi: B \to R$ and $\psi: C \to R$ such that the compositions with the maps $A \to B$ and $A \to C$ respectively give the same map $A \to W$. Then we get a map $B \otimes_A C \to R$, which is uniquely defined by $b \otimes c \mapsto \varphi(b)\psi(c)$ and extending linearly to sums, so $B \otimes_A C$ is the fibered coproduct in the category of rings.
\end{proof}
There is also a generalization we have for injective and surjective maps, which are monomorphisms and epimorphisms.
%
\begin{defn}
A morphisms $\pi : X \to Y$ is a monomorphism, if given two maps $f,g : Z \to X$ satisfying $\pi \circ f = \pi \circ g$, then $f = g$.
\end{defn}
%
You should think of this as an injective map, but note that monomorphisms don't necessarily have to be injective.
%
\begin{exer}
Show the composition of two monomorphisms is a monomorphism.
\end{exer}
%
\begin{proof}
Let $\varphi: X \to Y$ and $\psi : Y \to Z$ be monomorphisms, and let $f,g: A \to X$ satisfying
$$\psi \circ \varphi \circ f = \psi \circ \varphi \circ g$$
Since $\psi$ is a monomorphism, we conlcude that $\varphi \circ f = \varphi \circ g$, and since $\varphi$ is a monomorphism, we conclude that $f = g$. Therefore, we have that $\psi \circ \varphi$ is a monomorphism as well.
\end{proof}
%
\begin{exer}
Prove a morphism $\pi : X \to Y$ is a monomorphism if and only if the fibered product $X \times_Y X$ exists, and the induced morphism $X \to X \times_Y X$ is an isomorphism
\end{exer}
%
\begin{proof}
We note that if we show that the map $X \to X \times_Y X$ is an isomorphism, we have shown existence, since $X$ certainly exists as an object. Therefore, we can assume that the fibered product exsits, and comes equipped with a map $p: X \times_Y X \to X$. In addition, we have that the identity map on $X$ induces a morphism $\iota: X \to X \times_Y X$. We claim that these two maps are inverses. We have that $\pi \circ \id_X = \pi \circ p \circ \iota$, from the universal property of the fibered product, so we conclude that $\id_X = p \circ \iota$. We now want to show that $\iota \circ p= \id_{X \times_Y X}$. We note that $p \circ \iota \circ p = \iota \circ p$ using the fact that $\pi$ is a monomorphism like we did earlier, so $\iota \circ p$ must be identity.

Conversely, suppose we are given that the map $\iota : X \to X \times_Y X$ is an isomorphism. Then any map $Z \to X$ induces a map $Z \to X \times_Y X$. Then suppose we are given two maps $f,g: Z \to X$ such that $\pi \circ f = \pi \circ g$. Then we have that they induce the same map $Z \to X \times_Y X$, which when composing with the isomorphism $p = \iota\inv$, gives us that $f = g$, so $\pi$ is a monomorphism.
\end{proof}
%
\begin{exer}
Show that if $Y \to Z$ is a monomorphism, then the induced map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$ is an isomorphism.
\end{exer}
%
\begin{proof}
As per the hint, there are two ways to prove this. For the first way, let $V$ be any object. We want to give a bijection $\hom(V,X_1 \times_Y X_2) \to \hom(V, X_1 \times_Y X_2)$. By the universal property, we know that giving a map $V \to X_1 \times_Y X_2$ is the same as giving maps $V \to X_i$ such that their compositions with the maps $X_i \to Y$ agree, and likewise for maps $V \to X_1 \times_Z X_2$. We have that the maps that define the fibered product  $X_1 \times_Y X_2$ are the compositions of the maps to $Y$ with the map $Y \to Z$, so we have that any map $V \to X_i$ that satisfies the conditions for $Y$ will also satisfy the conditions for $Z$,  so we have that the map $\hom(V, X_1 \times_Y X_2) \to \hom(V, X_1 \times_Z X_2)$ given by composing with the map $Y \to Z$ is surjective. In addition, since $Y \to Z$ is a monomorphism, if two maps $V \to X_i$ composed with  $\alpha$ or $\beta$ agree on the compositions with $Y \to Z$, they induce the same map to $X_1 \times_Y X_2$, so this map is injective, so we get a natural bijection $\hom(V, X_1 \times_Y X_2) \to \hom(V, X_1 \times_Z X_2)$. We then note that the map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$ is induced by the projection maps $X_1 \times_Y X_2 \to X_i$, and by how we constructed the bijection, we have that the bijection $\hom(V, X_1 \times_Y X_2) \to \hom(V,X_1 \times_Z X_2)$ is given by post-composing with our map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$, reading a little further to Yoneda's lemma tells us that it must be an isomorphism. If we don't want to use Yoneda's lemma, there is a bit more work to do with the universal property. We note that since $X_1 \times_Y X_2$ and $X_1 \times_Z X_2$ satisfy the same universal property, there exists a unique map $X_1 \times_Y X_2 \to X_1 \times_Z X_2$ such that precomposing the projection maps $X_1 \times_Z X_2 \to X_i$ with this map gives us the projection maps $X_1\times_Y X_2 \to X_i$, i.e. the following diagram commutes
$$\xymatrix{
X_1 \times_Y X_2  \ar@{-->}[dr] \ar[d] \ar[r] & X_2 \\
X_1 & X_1\times_Z X_2 \ar[u] \ar[l]
}$$
We note that the map we have given satisfies this property, so it is exactly this isomorphism
\iffalse
Alternatively, we can use the magic diagram, which tells us that the following diagram commutes
$$\xymatrix{
X_1 \times_Y X_2  \ar[d]_\gamma \ar[r]^{\varphi}  & X_1 \times_Z X_2 \ar[d]^\delta \\
Y \ar[r]_\psi & Y \times_Z Y
}$$
From a previous exercise, since $Y \to Z$ is a monomorphism, the bottom map is an isomorphism. We claim that this implies that the top map is an isomorphism. To show this, we use a similar strategy of showing that $X_1 \times_Z X_2$ satisfies the same universal property as $X_1 \times_Y X_2$. Since $\psi$ is an isomorphism,
\fi

\end{proof}
As alluded to in the previous proof, Yoneda's lemma is an important tool in category theory, and establishes the categorical mindset where understanding an \emph{object} is the same as understanding \emph{maps involving that object}. If we have a map $f: B \to C$, we get a map $\hom(C,A) \to \hom(B,A)$ given by $g \mapsto g \circ f$, giving a contravariant functor (\ib{the functor of points}). If we consider $\hom(A,B)$ and $\hom(A,C)$, we get a similar functor, which is covariant. Yoneda's lemma tells us that these functors are both sufficient to specify $A$ up to unique isomorphism.
%
\begin{exer}[\ib{Yoneda's Lemma}]
Let $A$ and $A'$ be objects in $\mathscr{C}$. Suppose we are given a family of maps
$$i_C : \hom(C,A) \to \hom(C,A') $$
such that given any $f: B \to C$, the following diagram commutes
$$\xymatrix{
\hom(C,A) \ar[r]^{i_C} \ar[d]  & \hom(C,A') \ar[d] \\
\hom(B,A) \ar[r]_{i_B} & \hom(B,A')
}$$
where the vertical maps are given by precomposition with $f$.
\begin{enumerate}
\item Show that there is a unique map $g: A \to A'$ such that $i_C$ is given by $u \mapsto g \circ u$
\item Show that if all the $i_C$ are bijections, the $g$ is an isomorphism
\end{enumerate}
\end{exer}
%
\begin{proof} \enumbreak
\begin{enumerate}
\item Let $C = A$, in which case we have the map $i_A : \hom(A,A) \to \hom(A,A')$. We claim that the map $g :  A \to A'$ we are looking for is $i_A(\id_A)$. We first show that composition with $g = i_A(\id_A)$ satsifies the conditions we desire, i.e. that the following diagram commutes for any map $f: B \to C$
$$\xymatrix{
\hom(C,A) \ar[d] \ar[r]^{i_C} & \hom(C,A') \ar[d] \\
\hom(B,A) \ar[r]_{i_B} & \hom(B,A')
}$$
Chasing the diagram reveals that the diagram commutes, since any map $\varphi \in \hom(C,A)$ gets mapped to $i_A(\id_A) \circ \varphi \circ f \in \hom(B,A')$. We now want to show that the maps $i_C$ are given by composition with $i_A(\id_A)$. We next note that using the above diagram with $C = B$, the fact that it commutes, is equivalent to the fact that $i_C(g \circ f) = i_C(g) \circ f$ for $g,f \in \hom(C,C)$. Letting $C = A$, we find that $i_A(\id_A \circ f)  = i_A(f) = i_A(\id_A) \circ f$, so $i_A$ is certainly given by composition with $i_A(\id_A)$. Then for any morphism $f: A \to C$, we have that  the diagram commutes
$$\xymatrix{
\hom(C,A) \ar[d] \ar[r]^{i_C} & \hom(C,A') \ar[d] \\
\hom(A,A) \ar[r]_{i_A} & \hom(A,A')
}$$
which gives us that for any $\varphi \in \hom(C,A)$ that
$$i_A(\varphi \circ f) = i_A(\id_A) \circ \varphi \circ f = i_C(\varphi) \circ f $$
which implies that $i_C(\varphi) = i_A(\id_A) \circ \varphi$
\item In the case that all the $i_C$ are bijections, we note that we can repeat  the same argument to conclude that  the $i_C\inv$ are given by composition by the map $i_A\inv(\id_{A'})$, which necessarily must be the inverse to $i_A(\id_A)$, so it is an isomorphism.
\end{enumerate}
\end{proof}
A similar proof works for the contravariant version. Yoneda's lemma is actually a bit more techinical than this (which involves the functor category and natural transformations), but the essence of what it means is what we just proved.

The next big topic we want to cover is the concept of limits and colimits (no, not analysis).
%
\begin{defn}[\ib{Techinical definition because of set theoretic issues}]
A category $\mathscr{C}$ is \ib{small} if the collection of all objects/morphisms is a set
\end{defn}
%
\begin{defn}
Let $\mathscr{I}$ be a small category, and $\mathscr{C}$ any category. Then any functor $F : \mathscr{I} \to \mathscr{C}$ is called a \ib{diagram indexed by} $\mathscr{I}$.
\end{defn}
In most cases, the indexing category $\mathscr{I}$ will be a partially ordered set. For example, if we let $\mathscr{I}$ be the category
$$\begin{tikzcd}
  \bullet \arrow[r] \arrow[d] & \bullet \arrow[d] \\
  \bullet \arrow[r] & \bullet
  \end{tikzcd}
$$
A functor $\mathscr{I} \to \mathscr{C}$ is equivalent to giving such a commuting square in $\mathscr{C}$. For notations sake, we will let $A_i = F(i)$ for $i \in \mathsf{Ob}(\mathscr{I})$
%
\begin{defn}
Given a functor $\mathscr{I} \to \mathscr{C}$, the \ib{limit} of the diagram is another object $\lim\limits_{\leftarrow_\mathscr{I}} A_i \in \mathsf{Ob}(\mathscr{C})$, equipped with maps $f_j : \lim\limits_{\leftarrow_{\mathscr{I}}} A_i \to A_j$ for each $j \in \mathsf{Ob}(\mathscr{I})$ such that given any morphism $m: j \to k$, the following diagram commutes
$$\begin{tikzcd}
\lim\limits_{\leftarrow_{\mathscr{I}}}A_i \arrow[d,"f_j"'] \arrow[dr, "f_k"] \\
A_j \arrow[r, "F(m)"']  & A_k
\end{tikzcd}$$
In addition, these maps $f_j$ are final with respect to this property, which means that if we have another object $W$ with maps $g_i \to A_i$ that commute with morphisms $j \to k$, we get a unique morphism $g: W \to \lim\limits_{\leftarrow_{\mathscr{I}}}$ such that $g_i = f_i \circ g$
\end{defn}
%
Vakil gives the following as examples, but it's good to work through them to process what's really going on.
%
\begin{exmp}
Suppose $\mathscr{I}$ is the diagram
$$\begin{tikzcd}
& \bullet \arrow[d] \\
\bullet \arrow[r] & \bullet
\end{tikzcd}$$
Then the limit is the fibered product. More precisely, suppose the functor is given by the following diagram
$$\begin{tikzcd}
& A \arrow[d]\\
B \arrow[r] & C
\end{tikzcd}$$
Then the limit is exactly the fibered product $A \times_C B$. \\

To see why, we note that the limit (which we will denote $L$ for convenience) is an object $L$ equipped with $3$ maps, one to each of $A,B$, and $C$. Since the only morphisms are $A \to C$ and $A \to B$, the compatibility condition translates to the maps $A,B \to C$ agreeing with the map $L \to C$. We note that this is exactly the fact that the maps $A \to B$ and $B \to C$ being the same (since this defines the map $A \times_C B \to C$), and the fact that this object is final (sometimes called universal), translates to the fact that any other object with this property (maps to $A$ and $B$ agreeing with the map to $C$, factors through the fibered product.
\end{exmp}
Perhaps slightly simpler
\begin{exmp}
Let $\mathscr{I}$ be the uninteresting diagram
$$\xymatrix{
\bullet & \bullet
}$$
Then the limit is the product. \\

This one is easier to see. Let the functor $\mathscr{I} \to \mathscr{C}$ be given by the diagram
$$\xymatrix{
A & B
} $$
Then the limit $L$ is an object with maps $L \to A$ and $L \to B$ such that any object $W$ with maps $W \to A$ and $W \to B$ factors through $L$, which is exactly the product! In more generality, if the category $\mathscr{I}$ is just a set of objects where there are no identity morphisms, we get the product $\prod_i A_i$. \\
\end{exmp}
%
One important fact is that when your category is sufficiently concrete (it looks like $\mathsf{Set})$ and has all products, the limit will always exist (which implies that there are limits that don't exist). In this case, most concrete categories (sets with extra structure) have all of their limits.
%
\begin{exer}
Show that in $\mathsf{Set}$, we have
$$L = \set{(a_i) \in \prod_{i \in \mathscr{I}} A_i ~\colon~ F(m)(a_j) = a_k \text{ for } m \in \hom(j,k)}$$
with the projection maps $\pi_i: L \to A_i$ is the limit.
\end{exer}
%
\begin{proof}
We first verify that the set $L$ satisfies all the conditions we want, and then we show it is universal/final. Recall that for any two $j,k \in \mathscr{I}$ (technically $\mathsf{Ob}(\mathscr{I})$, but I hope you can forgive the abuse of notation), with a morphism $m : j \to k$, we want the following diagram to commute
$$\begin{tikzcd}
L \arrow[d, "\pi_j"'] \arrow[dr, "\pi_k"] \\
A_j \arrow[r, "F(m)"'] & A_k
\end{tikzcd}$$
we note that we defined this set exactly to make this diagram commute, since the only tuples in the set are the ones that are ``matched" by a morphism $F(m)$. To show this is final, we want to show any other object $W$ with maps $\psi_i : W \to A_i$ with the same property is equipped with a map to $W$. Again, we note that by the definition, $L$ must contain every set that makes the diagram commute for all morphisms $m$, since otherwise there will have to be some tuple $(c_i) \in \prod_{i \in \mathscr{I}} A_i$ where for some $m \in \hom(j,k)$, $F(m)(a_j) \neq a_k$, in which case that morphism $m$ will fail to make the diagram commute. This proves that any other set with such maps comes equipped with a natural inclusion into $L$.
\end{proof}
%
Like with every other concept we've discovered, we can slap ``co" in front of the word ``limit," and what do we obtain? The object you get by flipping all of the arrows\footnote{Something something cotheorems, something something ffee}. More explicitly,
%
\begin{defn}[\ib{Flip ALL the arrows}]
Given a functor $F : \mathscr{I} \to \mathscr{C}$, the \ib{colimit} $\lim\limits_{\to_\mathscr{I}}A_i$ is an object equipped with maps $f_i : A_i \to \lim\limits_{\to_\mathscr{I}}A_i$ such that for any morphism $m : j \to k$, the following diagram commutes\footnote{Yes, I didn't flip the $F(m)$ arrow, but it's symmetric\ldots}
$$\begin{tikzcd}
\lim\limits_{\to_\mathscr{I}} A_i \\
A_j \arrow[u, "f_j"]\arrow[r, "F(m)"'] & A_k \arrow[ul, "f_k"']
\end{tikzcd}$$
And the colimit is universal in the sense that it is initial with respect to all objects with this property. In other words, if we have another object $W$ satisfying the same conditions with the commuting triangle, we get a unique map $\lim\limits_{\to_{\mathscr{I}}}A_i \to W$.
\end{defn}
Again, we'll work through the examples to get a better grip on what's actually going on.
\begin{exmp}
Suppose we have the diagram
$$\Z \to 5\inv\Z \to 5^{-2}\Z \to 5^{-3}\Z \to \cdots$$
where $5^{-i}$ denotes all rational numbers with a denominator $5^i$, and all the horizontal maps are given by multiplication by $5/5$ (i.e. inclusion). We claim that the colimit of this diagram is the set $5^{-\infty}\Z$, the set of all rational numbers with denominators a power of $5$. \\

Why is this? We for each $i$, we get a natural map $5^{-i}\Z \hookrightarrow 5^{-\infty}\Z$, which is just inclusion. Then since all of the maps in the diagram are the inclusions $5^{-i}\Z \to 5^{-(i+1)}\Z$, the only diagrams we need to consider are
$$\begin{tikzcd}
5^{-\infty}\Z \\
5^{-i}\Z \arrow[u] \arrow[r] & 5^{-(i + 1)}\Z \arrow[ul]
\end{tikzcd}$$
\end{exmp}
which obviously commutes. To prove it is universal, let $W$ be an object such that for every $i$, we have
$$\begin{tikzcd}
W \\
5^{-i}\Z \arrow[u] \arrow[r] & 5^{-(i + 1)}\Z \arrow[ul]
\end{tikzcd}$$
Then we must have that $r/5^{i}$ maps to the same place as $5r/5^{i+1}$, therefore, we can map $r/5^i$ and $5r/5^{-(i+1})$ into $5^{-\infty}\Z$ first, and provide a well defined map into $W$, where the equivalence class of fractions $5^jr/5^{j+i} \sim r/5^i$ are all mapped to the same place.
%
\begin{exer} \enumbreak
\begin{enumerate}
\item Interpret the meaning of the statement $\Q = \lim\limits_\to \frac{1}{n}\Z$
\item Interpret the meaning of the union of subsets of a given set as a colimit. Dually, interpret the intersection as a limit
\end{enumerate}
\end{exer}
%
\begin{proof}
\begin{enumerate}
\item We first set up the diagram we want to find the colimit of. Let $\frac{1}{n}\Z$ denote the set of rational numbers with $n$ as the denominator. Then let there be a morphism $\frac{1}{n}\Z \to \frac{1}{m}\Z$ if $m$ is a multiple of $n$, where the map is given by inclusion (multiplication by $r/r$, where $m = rn$). We claim that $\Q$ equipped with the natural inclusions $\frac{1}{n}\Z \hookrightarrow \Q$ is the colimit of this diagram. We first note that the diagram
$$\begin{tikzcd}
\Q \\
\frac{1}{n}\Z \arrow[r] \arrow[u] & \frac{1}{rn}\Z \arrow[ul]
\end{tikzcd}$$
commutes, since each map is essentially inclusion, so we need to check universality, Let $W$ be another object with such maps $\frac{1}{n}\Z \to W$ such that the diagram above commutes. Then we know that $k/n$ maps to the same element as $rk/rn$, so we can first map to the equivalence class of fractions $[k/n] \in \Q$ before mapping to $W$. Therefore $\Q$ is initial.
\item We first clarify that the set we are working in is the category of subsets of a fixed set $S$, where there exists a morphism $A \to B$ if and only if $A \subset B$. The diagram we are concerned with are the subsets $A_i$ we are taking the union of, along with their corresponding morphisms to each other. We claim that their union, equipped with the 	``subset morphisms" $A_i \to \cup_i A_i$ is the colimit. we note that all the the subsets are subsets of the union, so these maps $A_i \to \cup_i A_i$ exist, and the diagram clearly will commute. For any other subset $K$ with such maps from $A_i \to K$, we must have that for all $i$, $A_i \subset K$, so we must have $\cup_i A_i \subset K$, which corresponds to a unique morphism $\cup_i A_i \to K$, proving that it is universal.
\end{enumerate}
\end{proof}

The proof for the intersection is much the same with the arrows reversed, except we note that this implies that any object with maps to all of the $A_i$ must be contained in all of the $A_i$, which must factor through the intersection.

Note that in $\mathsf{Set}$, all limits exist, but we need some additional assumptions for colimits to exist in $\mathsf{Set}$.
%
\begin{defn}
A category $\mathscr{I}$ is \ib{filtered} if
\begin{enumerate}
\item For any pair of objects $x,y$, there exists an object $z$ that has arrows $x \to z$ and $y \to z$.
\item For any pair of maps $u,v : x \to y$, there exists another map $w: y \to z$ such that $w \circ u = w \circ v$.
\end{enumerate}
\end{defn}
%
\begin{exer}
Let $\mathscr{I}$ be a filtered category. Show that any diagram indexed by $\mathscr{I}$ has a colimit, which is given by the set
$$C = \set{(a_i,i) \in \coprod_{i \in \mathscr{I}}A_i} \bigg/ \sim $$
where $\sim$ is the equivalence relation given by
$$(a_i,i) \sim (a_j,j) \iff \text{ there exist } f: A_i \to A_k \text{ and } g: A_j \to A_k \text{ in the digram where } f(a_i) = g(a_j)$$
\end{exer}
%
\begin{proof}
We first verify that $\sim$ actually defines an equivalence relation. For reflexivity, we note that $(a_i, i) \sim (a_i,i)$, where we can let the maps $f,g : A_i \to A_i$ be the identity map. For symmetry, suppose $(a_i, i) \sim (a_j, j)$, with maps $f : A_i \to A_k$ and $g : A_j \to A_k$ where $f(a_i) = g(a_j)$. Then renaming $f$ to $g$ and $g$ to $f$, we find that $(a_j,j) \sim (a_i,i)$. Finally, for transitivity, suppose $(a_i,i) \sim (a_j,j)$ and $(a_j,j) \sim (a_k,k)$. We want to show that $(a_i,i) \sim (a_k,k)$. Let $f : A_i \to A_n$ and $g : A_j \to A_n$ and $f' : A_j \to A_m$ and $g' : A_k \to A_m$ be the maps described in the definition of $\sim$. Since $\mathscr{I}$ is filtered, we know that we can find some $A_\ell
$ with maps $A_n \to A_\ell$ and $A_m \to A_\ell$. Composing these maps with $g$ and $f'$, this gives two maps $A_j \to A_\ell$, which guarantees the existence of a map $A_\ell \to A'_\ell$ whose compositions with the two maps $A_j \to A_\ell$ are the same, leaving us with the following (noncommutative) diagram of maps.
$$\begin{tikzcd}
A_i \arrow[dr, "f"'] & & A_j  \arrow[dl, "g"'] \arrow[dr, "f'"]& & A_k \arrow[dl, "g'"] \\
& A_n \arrow[dr] & & A_m \arrow[dl] \\
& & A_\ell \arrow[d] & & \\
& & A'_\ell & &
\end{tikzcd}$$
Then since $f(a_i) = g(a_j)$ and $f'(a_j) = f'(a_k)$, and the maps $A_j \to A_n \to A_\ell \to A'_\ell$ and $A_j \to A_m \to A_\ell \to A'_\ell$ are the same, we have that the compositions $A_i \to A'_\ell$ and $A_k \to A'_\ell$ map $a_i$ and $a_k$ to the same place, so we can finally conclude that $(a_i,i) \sim (a_k,k)$.

We now verify that $C$ defines the colimit of the diagram indexed by $\mathscr{I}$, where the maps $A_i \to C$ are given by the mappings $a_i \mapsto [a_i]$, where $[a_i] \in C$ denotes the equivalence class of $a_i$. We first want to show that for any morphism $m: j \to k$, the following diagram commutes
$$\begin{tikzcd}
C \\
A_j \arrow[u] \arrow[r,"F(m)"'] & A_k \arrow[ul]
\end{tikzcd}$$
which amounts to showing that for any $a_j \in A_j$, we have that $[F(m)(a_j) ] = [a_j]$, so we want to produce maps $f : A_j \to A_\ell$ and $g: A_k \to A_\ell$ with $f(a_j) = (g \circ F(m))(a_j)$. Again, since $\mathscr{I}$ is filtered, we can find some object $z$ in $\mathscr{I}$ such that we have maps $A_j \to A_z$ and $A_k \to A_z$, which gives us two maps $A_j \to A_z$, namely $A_j \to A_z$ and $A_j \to A_k \to A_z$. Then $\mathscr{I}$ being filtered gives us another map $A_z \to A_\ell$ such that the two different compositions $A_j \to A_\ell$ are equal. In particular, this implies that $F(m)(a_j)$ must be equal to the image of the map $A_j \to A_\ell$, so we conclude that they define the same equivalence class in $C$. We now want to show that $C$ is initial. Suppose $W$ is another object that makes the above diagram commute (replacing $C$ with $W$). This implies that for every morphism $m : j \to k$, we have that $a_j$ and $F(m)(a_j)$ map to the same element in $C$. We note that the above argument we made implies that $[a_j] = [F(m)(a_j)]$, so we get a map $C \to W$ by mapping $[a_j]$ to its image under the map $A_j \to C$, which is well defined by the fact that the diagram commutes.
\end{proof}
In fact, the construction we gave above works for many concrete algebraic categories. For our examples, we'll use $\mathsf{Mod}_R$. Given a diagram of $R$-modules $M_i$, the colimit $\lim\limits_\to M_i$ is given by the same underlying set as above, but we'll need to define addition and scalar multiplication to give it the structure of an $R$-module. For addition. let $m_i \in M_i$ and $m_j \in M_j$. Since we are assume the diagram is indexed by a filtered category, we know we have morphism $u: i \to k$ and $v : j \to k$, so we can define $m_i + m_j = F(u)(m_i) + F(v)(m_j) \in M_k$. We say that some element $m = 0$ if there is some $u$ with $u(m) = 0$. Finally, scalar multplication is defined in the normal way.
%
\begin{exer}
Interpret the localization of an integral domain as a colimit over a filtered set. Let $S$ be a multiplicative set and interpret $S\inv R$ as $\lim\limits_\to \frac{1}{s}R$ where the limit is over all $s \in S$ and we are working in the category of $R$-modules.
\end{exer}
%
\begin{proof}
As before, let $\frac{1}{s}R$ be the $R$-module of the set of fractions $r/s$, where $s$ is a fixed element of $S$> Like before, we define our diagram to have a morphism $\frac{1}{s}R \to \frac{1}{t}R$ if $t = ps$ for some $p \in R$, (i.e. $t$ is a multiple of $s$), and the map is given my $r/s \mapsto pr/ps$, which is visibly an $R$-module homomorphism. We then claim that we have given a filtered diagram and that $S\inv R$ is the colimit. To show that it is a filtered diagram, we note that for any $s,t \in S$, we have that $\frac{1}{s}R$ and $\frac{1}{t}R$ both have maps to $\frac{1}{st}R$. In addition, w note that our diagram has at most one map $\frac{1}{s}R \to \frac{1}{t}R$, so the second condition of a filtered diagram is vacuously true. We then want to show that the localization $S\inv R$ is the colimit of this diagram, which is now essentially the same proof as we gave for $\Q = \lim\limits\to \frac{1}{n}\Z$.
\end{proof}

We now move on to adjoints.
\begin{defn}
Let $\mathcal{F}: \mathscr{A} \to \mathscr{B}$ and $\mathcal{G}: \mathscr{B} \to \mathscr{A}$ be covariant functors. We say that $\mathcal{F}$ and $\mathcal{G}$ are \ib{adjoint} if there exists a natural bijection
$$\tau_{AB} : \hom_{\mathscr{B}}(F(A),B) \to \hom_{\mathscr{A}}(A, \mathcal{G}(B)) $$
In this case, we say that $(\mathcal{F},\mathcal{G})$ form an \ib{adjoint pair}, with $\mathcal{F}$ being the \ib{left adjoint} to $\mathcal{G}$ and $\mathcal{G}$ being the \ib{right adjoint} to $\mathcal{F}$. Naturality of the bijection amounts to saying that given any morphism $f : A \to C$, the following diagram commutes
$$\begin{tikzcd}
\hom_\mathscr{B}(F(C),B) \arrow[d,"\tau_{CB}"']\arrow[r,"F(f)^*"] & \hom_\mathscr{B}(F(A),B) \arrow[d, "\tau_{AB}"] \\
\hom_\mathscr{A}(C,G(B)) \arrow[r, "f^*"'] & \hom_\mathscr{A}(A,G(B))
\end{tikzcd}$$
where $F(f)^*$ and $f^*$ are the maps determined by composition with $F(f)$ and $f$ respectively. For a morphism $g: B \to D$, we want a similar diagram to commute.
\end{defn}
%
\begin{exer}
Draw the diagram we want to commute given $g: B \to D$.
\end{exer}
%
\begin{proof}
$$\begin{tikzcd}
\hom_\mathscr{B}(\mathcal{F}(A),B) \arrow[d,"\tau_{AB}"'] \arrow[r,"g_*"] & \hom_\mathscr{B}(F(A),D) \arrow[d,"\tau_{AD}"] \\
\hom_\mathscr{A}(A,\mathcal{G}(B)) \arrow[r,"\mathcal{G}(g)_*"'] & \hom_\mathscr{A}(A,\mathcal{G}(D))
\end{tikzcd}$$
where $g_*$ and $\mathcal{G}(g)_*$ are the maps induced by post-composition with $g$ and $\mathcal{G}(g)$  respectively.
\end{proof}
%
\begin{exer}
Show that the map $\tau_{AB}$ as defined above has the following properties
\begin{enumerate}
\item For each object $A$, there exists a map $\eta_A: A \to (\mathcal{G} \circ \mathcal{F})(A)$ such that for any $\varphi : \mathcal{F}(A) \to  B$, the map $\tau_{AB}(g)$ is given by the composition $\mathcal{G}(\varphi) \circ \eta_A$.
\item Similarly, for each object $B$, there exists a map $\varepsilon_B : (\mathcal{F} \circ \mathcal{G})(B) \to B$ such that for any $f : A \to \mathcal{G}(B)$, the map $\tau\inv_{AB}(f)$ is given by the composition $\varepsilon_B \circ \mathcal{F}(f)$.
\end{enumerate}
\end{exer}
%
\begin{proof}\enumbreak
\begin{enumerate}
\item Consider the map $\tau_{A\mathcal{F}(A)} : \hom_\mathscr{B}(\mathcal{F}(A), \mathcal{F}(A)) \to \hom_\mathscr{A}(A, (\mathcal{G} \circ \mathcal{F})(A))$. We claim the map $\eta_A : A \to (\mathcal{G \circ F})(A)$ is given by $\eta_A = \tau_{A\mathcal{F}(A)}(\id_{\mathcal{F}(A)})$. To see this, consider the diagram we constructed for the previous exercise, where $B = D$, so $g : B \to B$. This gives  us the diagram
$$\begin{tikzcd}
\hom_\mathscr{B}(\mathcal{F}(A),B) \arrow[d, "\tau_{AB}"'] \arrow[r,"g_*"] & \hom_\mathscr{B}(F(A),B) \arrow[d, "\tau_{AB}"]\\
\hom_\mathscr{A}(A,\mathcal{G}(B))  \arrow[r, "\mathcal{G}(g)_*"'] & \hom_\mathscr{A}(A,\mathcal{G}(B)
\end{tikzcd}$$
The fact that this diagram commutes amount to saying for $\varphi : \mathcal{F}(A) \to B$, we have that
$$\tau_{AB}(g\circ \varphi) = \mathcal{G}(g) \circ \tau_{AB}(\varphi) $$
In particular, we note that $g \circ \varphi$ is also a map $F(A) \to B$, and that $\varphi = \varphi \circ \id_{\mathcal{F}(A)}$, so this gives us that
$$\tau_{AB}(g \circ \varphi \circ \id_{\mathcal{F}(A)}) = \mathcal{G}(g \circ \varphi) \circ \tau_{AB}(\id_{\mathcal{F}(A)}) $$
Taking $g = \id_B$ then gives us the identity we desire.
\item This proof is near identical to the above proof, where we instead use the diagram
$$\begin{tikzcd}
\hom_\mathscr{B}(F(A),B) \arrow[d,"\tau_{AB}"']\arrow[r,"F(f)^*"] & \hom_\mathscr{B}(F(A),B) \arrow[d, "\tau_{AB}"] \\
\hom_\mathscr{A}(A,G(B)) \arrow[r, "f^*"'] & \hom_\mathscr{A}(A,G(B))
\end{tikzcd}$$
and $\varepsilon_B$ is given by $\tau_{\mathcal{G}(B)B}(\id_{\mathcal{G}(B)})$
\end{enumerate}
\end{proof}
%
Two of the functors we've already met form and adjoint pair!
%
\begin{exer}
Let $M,N,P$ be $A$-modules. Give a bijection $\hom(M \otimes_A N, P) \to \hom(M,\hom(N,P))$
\end{exer}
%
\begin{proof}
By the universal property of the tensor product, we have that an element $\varphi \in \hom(M \otimes_A N, P)$ is equivalent to a bilinear map $M \times N \to P$, which by abuse of notation, we will also denote $\varphi$. Then given this bilinear map $\varphi$, for a fixed $m$, we can define a map $N \to P$ by $n \mapsto \varphi(m,n)$. We claim that this defines a bijection. For surjectivity, let $\psi : M \to \hom(N,P)$. Then we can define $\tilde{\psi} : M \times N \to P$ by $\tilde{\psi}(m,n) = \psi(m)(n)$. We claim that this map $\tilde{\psi}$ is bilinear, so it is an element of $\hom(M \otimes_A N, P)$. Fix $n \in N$, and let $a,b \in A$ and $m,s \in M$. We compute
\begin{align*}
\tilde{\psi}(am + bs, n) = \psi(am + bs)(n) = a\psi(m)(n) + b\psi(s)(n)
\end{align*}
by linearity of $\psi$.
Letting  $a,b \in A$ again, fixing $m \in M$ and letting $n,t \in N$ be arbitrary, we compute
\begin{align*}
\tilde{\psi}(m, an + bt) = \psi(m)(an + bt) = a\psi(m)(n) + b\psi(m)(t)
\end{align*}
since $\psi(m)$ is linear. Therefore, $\tilde{\psi}$ is bilinear, and it is clear that $\tilde{\psi}(m, \cdot) = \psi$, so $\psi$ is in the image of the map we described, giving surjectivity. For injectivity, let $\rho,\eta : M\times N \to P$, where $\rho(m,\cdot) = \eta(m, \cdot)$ for all $m \in M$. This implies that $\rho(m,n) = \eta(m,n)$ for all $m \in M$ and $n \in N$, so $\rho = \eta$, giving injectivity, and showing that our map is a bijection.
\end{proof}
%
\begin{exer}
Fix an  $A$-module $N$. Then let $\mathcal{N}$ be the functor that maps an $A$-module $M$ to $M \otimes_A N$ and a map $\varphi : M \to P$ to the map $\varphi \otimes \id_N(m \otimes n) = \varphi(m) \otimes n$. Then let $\mathcal{H}$ be the covariant functor of points, that maps $M \mapsto \hom(N,M)$, and a map $\varphi : M \to P$ to the map $\varphi_*: \hom(N,M) \to \hom(N,P)$ given by $\varphi_*f = \varphi \circ f$. Show that $\mathcal{N}$ and $\mathcal{H}$ define adjoint functors.
\end{exer}
%
\begin{proof}
The previous exercises gives the bijection $\tau_{MP} : \hom(\mathcal{N}(M),P) \to \hom(M,\mathcal{H}(P))$. We then want to show that this bijection is natural in the sense that it makes the following diagram commute for every map $f : M \to X$
$$\begin{tikzcd}
\hom(X \otimes_A N, B) \arrow[d, "\tau_{XB}"'] \arrow[r, "(f\otimes \id_N)^*"] & \hom(M \otimes_A N, B) \arrow[d,"\tau_{MB}"] \\
\hom(X, \hom(N,B)) \arrow[r, "f^*"'] & \hom(M, \hom(N,B))
\end{tikzcd}$$
Let $\varphi \in \hom(X \otimes_A N, B)$. We compute
\begin{align*}
(\tau_{MB} \circ (f \otimes \id_N)^*)(\varphi)(m)(n) &= \tau_{MB}(\varphi \circ f \otimes \id_N)(m)(n) \\
&= (\varphi \circ f \otimes \id_N)(m,n) \\
&= \varphi(f(m) \otimes n)
\end{align*}
Going the other way, we compute
\begin{align*}
(f^* \circ \tau_{XB})(\varphi)(m)(n) &= (\tau_{XB}(\varphi) \circ f)(m)(n) \\
&= \varphi(f(m) \otimes n)
\end{align*}
In both cases, we use the universal property of the tensor product the fact that $\varphi$ is bilinear to interpret $\varphi(x,n)$ as $\varphi(x \otimes n)$, depending on the interpretation of $\varphi$ as a bilinear map out of $X \times N$ or a linear map out of $X \otimes_A N$.

We also want to show the other diagram commutes, i.e. given $g : B \to D$
$$\begin{tikzcd}
\hom(M \otimes_A N, B) \arrow[d,"\tau_{MB}"']\arrow[r, "g_*"] & \hom(M \otimes_A N,  D) \arrow[d,"\tau_{MD}"] \\
\hom(M, \hom(N,B)) \arrow[r, "(g_*)_*"'] & \hom(M, \hom(N,D))
\end{tikzcd}$$
Given $\varphi : M \otimes_A N \to B$, we compute
\begin{align*}
(\tau_{MD} \circ g_*)(\varphi)(m)(n) &= \tau_{MD}(g \circ \varphi)(m)(n) \\
&= (g \circ \varphi)(m \otimes n)
\end{align*}
Going the other way, we compute
\begin{align*}
((g_*)_* \circ \tau_{MB})(\varphi)(m)(n) &= (g_* \circ \tau_{MB}(\varphi))(m)(n) \\
&= (g \circ \tau_{MB}(\varphi)(m))(n) \\
&= (g \circ \varphi)(m \otimes n)
\end{align*}
\end{proof}
%
\begin{exer}
Given a ring homomorphism $B \to A$, any $A$-modules becomes a $B$ module, which gives us a functor $\mathsf{Mod}_A \to \mathsf{Mod}_B$. Show that this functor is right adjoint to the functor that maps a $B$-module $M$ to $M \otimes_B A$.
\end{exer}
%
\begin{proof}
We want to give a bijection $\hom_A(N \otimes_B A, M) \to \hom_B(N, M_B)$, where $M_B$ is the $A$-module $M$ interpreted as a $B$ module via the homomorphism $B \to A$. Where $N$ is an arbitrary $B$-module. Using the universal property of the tensor product, we can identity an element of $\hom_A(N \otimes_B A, M)$ as a $B$-bilinear map $N \times A \to M$. Then we claim that the bijection given by the mapping $\varphi \mapsto \tilde{\varphi}$ where $\tilde{\varphi}(n) = \varphi(n \otimes 1)$ is the one we desire. We want to show that two diagrams commute. For the first one let $f: M \to X$, and $N$ an arbitrary $A$-module. We then want the following diagram to commute
$$\begin{tikzcd}
\hom_A(X \otimes_B A,N) \arrow[d, "\tau_{XN}"'] \arrow[r, "(f \otimes \id_A)^*"] & \hom_A(M \otimes_B A, N) \arrow[d, "\tau_{MN}"] \\
\hom_B(X, N_B) \arrow[r, "f^*"'] & \hom_B(M,N_B)
\end{tikzcd}$$
Where the map $f$ on the bottom is the pullback induced by interpreting $f$ as a $B$-module homomorphism and the vertical maps are the bijections we described above. Let $\varphi \in \hom_A(X \otimes_B A, N)$. We then compute
\begin{align*}
(\tau_{MN} \circ (f\otimes\id_A)^*)(\varphi)(m) &= \tau_{MN}(\varphi \circ f \otimes\id_A)(m) \\
&= (\varphi \circ f\otimes\id_A)(m \otimes 1) \\
&= \varphi(f(m) \otimes 1)
\end{align*}
Going the other way, we compute
\begin{align*}
(f^* \circ \tau_{XN}(\varphi))(m) &= (\tau_{XN}(\varphi) \circ f)(m) \\
&= \varphi(f(m) \otimes 1)
\end{align*}
Given a map $g: N \to D$, we want the following diagram to commute as well.
$$\begin{tikzcd}
\hom_B(M \otimes_B A, N) \arrow[d, "\tau_{MN}"'] \arrow[r, "g_*"] & \hom_B(M \otimes_B A, D) \arrow[d, "\tau_{MD}"] \\
\hom_A(M, N_B) \arrow[r, "g_*"'] & \hom_A(M, D_B)
\end{tikzcd}$$
where again, the bottom map interprets $g$ as a $B$-module homomorphism. Let $\varphi \in \hom_B(M \otimes_B A,N)$. We then compute
\begin{align*}
(\tau_{MD} \circ g_*)(\varphi)(m) &= (g \circ \tau_{MD}(\varphi)(m) \\
&= g(\varphi(m \otimes 1))
\end{align*}
Going the other way, we have
\begin{align*}
(g_* \circ \tau_{MN})(\varphi)(m) &= (g \circ \tau_{MN}(\varphi)(m) \\
&= g(\varphi(m \otimes 1)
\end{align*}
\end{proof}
Another example of adjoints is the groupification of an abelian semigroup, and the forgetful functor from abelian groups to abelian semigroups, but we'll move on the the next section now.
%
\begin{defn}
A category $\mathscr{C}$ is $\ib{additive}$ if
\begin{enumerate}
\item For any pair of objects $A,B$, we have that $\hom(A,B)$ is an abelian group under an operation we call addition, such that composition distributes over addition, i.e.
$$\varphi( \psi + \rho) = \varphi \circ \psi + \varphi \circ \rho $$
and
$$(\psi + \rho) \circ \varphi = \psi \circ \varphi + \rho \circ \varphi $$
\item $\mathscr{C}$ has a zero object.
\item $\mathscr{C}$ contains all pairwise products $A \times B$, and by induction, all finite products.
\end{enumerate}
\end{defn}
%
The fact that additive categories have a zero object gives us some things from algebra we like a lot -- kernels and cokernels.
%
\begin{defn}
Let $\mathscr{C}$ be a category with a zero object, denoted $0$. Given a map $f: B \to C$, the \ib{kernel} of $f$ is another object $A$ with a map $i : A \to B$ such that $f \circ i$ is the zero map $B \to 0$. This is summarized by the commuting diagram
$$\begin{tikzcd}
0 \arrow[d] \arrow[dr] \arrow[drr]\\
A \arrow[rr, "0"' , bend right=50]\arrow[r,"i"'] & B \arrow[r,"f"'] & C
\end{tikzcd}$$
which can also be identified as the limit of the diagram
$$\begin{tikzcd}
& 0 \arrow[d] \\
B \arrow[r,"f"'] & C
\end{tikzcd}$$
\end{defn}
%
As you expect, the cokernel comes from flipping all of the arrows
\begin{defn}
Given a category $\mathscr{C}$ with a zero object $0$, given a map $f: B \to C$ the \ib{cokernel} is another object $A$ with a maps $p : C \to A$ such that $f \circ p = 0$, which is summarized by the commuting  diagram
$$\begin{tikzcd}
0 \\
B \arrow[u] \arrow[r, "f"'] & C \arrow[ul] \arrow[r, "p"'] & A \arrow[ull]
\end{tikzcd}$$
\end{defn}
If the map $i: A \to B$ specified in the definition of the kernel is a monomorphism, we say that $A$ is a \ib{subobject} of $B$. Likewise, if the map $p: C \to A$ is an epimorphism, we say that $A$ is a \ib{quotient object} of $B$.
%
\begin{defn}
An \ib{abelian category} is an additive category such that
\begin{enumerate}
\item For any map $f$, $\ker f$ and $\coker f$ exist.
\item Every monomorphism is the kernel of its cokernel.
\item Every epimoprhism is the cokernel of its kernel.
\end{enumerate}
The last two conditions can be stated more clearly. For (2), let $\varphi : A \to B$ be a monomorphism. We want to have that the composition $A \to B \to \coker f$ to satisfy the properties of the kernel for $\coker f$, and a similar statement for (3).
\end{defn}
%
\begin{defn}
Given a map $f$, the \ib{image} of $f$, denote $\im f$ is $\ker(\coker f)$
\end{defn}

We're now going discuss some (co)homology. We're going to assume that we're always working in an abelian category (just thing modules over a ring).
\begin{defn}
A sequence
$$\begin{tikzcd}
\cdots \arrow[r,] & A \arrow[r,"f"] & B \arrow[r,"g"] & C \arrow[r] & \cdots
\end{tikzcd}$$
is a \ib{complex} at $B$ $g \circ f = 0$ and is \ib{exact} at $B$  if $\ker g = \im f$, i.e. $g$ has a kernel that is a cokernel of $f$.
\end{defn}
%
\begin{exer}
Exactness at $B$ implies the sequence is a complex at $B$.
\end{exer}
%
\begin{proof}
We know that the map $f: A \to B$ factors uniquely as a map $\tilde{f}: A \to \im f$, giving us the diagram
$$\begin{tikzcd}
A \arrow[dr, "\tilde{f}"']\arrow[r, "f"] & B \\
& \im f \ar[u]
\end{tikzcd}$$
Where the vertical arrow is the natural map $\ker (\coker f)$ induced by the map $B \to \coker f$. Combining this with the diagram for the kernel of $g$, and substituting $\im f$ with $\ker g$ (since they are equal), we get the commuting diagram
$$\begin{tikzcd}
A \arrow[dr, "\tilde{f}"']\arrow[r, "f"] & B \arrow[r, "g"] & C \\
& \ker g \ar[u] & 0 \arrow[l] \arrow[ul] \arrow[u]
\end{tikzcd}$$
showing that $g \circ f = 0$.
\end{proof}
%
\begin{defn}
Given a complex
$$\begin{tikzcd}
\cdots \arrow[r] & A \arrow[r, "f"] & B \arrow[r, "g"] & C \arrow[r] & \cdots
\end{tikzcd}$$
The \ib{homology} $H$ at $B$ is $H = \ker g / \im f$, i.e. there exists a monomorphism $i : \im f \to \ker g$ and $H = \coker i$. In the case that the objects we're working with are sets (e.g. abelian groups, modules), elements of $\im f$ are \ib{cycles} and elements of $\ker g$ are \ib{boundaries}.
\end{defn}
%
In most cases, we'll index the objects in our sequence, and depending on whether are indices are decreasing or increasing from left to right, we'll say the homology or cohomology of the sequence respectively. We'll also use the notation
$$A^\bullet = \begin{tikzcd}
\cdots \arrow[r] & A^{i-1} \arrow[r, "f^{i-1}"] & A^i \arrow[r, "f^i"] & A^{i+1} \arrow[r, "f^{i+1}"] & \cdots
\end{tikzcd}$$
$$A_\bullet = \begin{tikzcd}
\cdots \arrow[r] & A_{i+1} \arrow[r, "f_{i+1}"] & A_i \arrow[r, "f_i"] & A_{i-1} \arrow[r, "f_{i-1}"] & \cdots
\end{tikzcd}$$
\begin{rem*}
For most of the remaining discussion on homology, we'll be working in the category of modules over a ring. That being said, most of the statements will transfer over to arbitrary abelian categories.
\end{rem*}
%
\begin{exer}
Describe exact sequences
$$\begin{tikzcd}
0 \arrow[r] & \im f^i \arrow[r] & A^{i+1} \arrow[r] & \coker f^i \arrow[r] & 0
\end{tikzcd}$$
$$\begin{tikzcd}
0 \arrow[r] & H^i(A^\bullet) \arrow[r] & \coker f^{i-1} \arrow[r] & \im f^i \arrow[r] & 0
\end{tikzcd}$$
\end{exer}
%
\begin{proof}
For the first sequence, the first nonzero map is the natural inclusion $\im f^i \hookrightarrow A^{i+1}$ and the second map is the quotient map $A^{i+1} \to \coker f^i = A^{i+1} / \im f^i$. For the second sequence, we have that $H^i(A^\bullet) = \ker f^i / \im f^{i-1}$, which has a natural inclusion into $\coker f^{i-1} = A^i / \im f^{i-1}$. In addition, since $\im f^{i-1} \subset \ker f^i$. we have that the map $f^i : A^i \to A^{i+1}$ factors through the quotient $\coker f^{i-1}$ to a surjective map $\coker f^{i-1} \to \im f^i$.
\end{proof}
%
\begin{exer}
Suppose we are given a complex of finite dimensional vector spaces
$$ A^\bullet = \begin{tikzcd}
0 \arrow[r, "d^0"] & A^1 \arrow[r, "d^1"] & \cdots \arrow[r, "d^{n-1}"] & A^n \arrow[r, "d^n"] & 0
\end{tikzcd}$$
Let $h^i(A^\bullet) = \dim H^i(A^\bullet)$. Show
$$\sum (-1)^i h^i(A^\bullet) = \sum (-1)^i \dim A^i $$
\end{exer}
%
\begin{proof}
From the rank-nullity theorem, we know that $\dim A^i = \dim \im d^i  + \dim \ker d^i$. This gives us that 
$$ h^i(A^\bullet) = \dim \ker d^{i+1} / \im d^i = (\dim A^{i+1} - \dim \im d^{i+1}) - (\dim A^i - \dim\ker d^i) $$
Then when we consider the alternating sum
$$ \sum (-1)^i h^i(A^\bullet) = \sum (-1)^i  ((\dim A^{i+1} - \dim \im d^{i+1}) - (\dim A^i - \dim\ker d^i)) $$
We note that the term of $(-1)^i$ makes the $\dim \im d^{i +1}$ be the same sign as the $\dim \ker d^{i+1}$ term, and that the first maps are injective and surjective respectively, so using this with rank-nullity again we can simplify this sum to
$$ \sum (-1)^i h^i(A^\bullet) = \sum (-1)^i (\dim A^{i+1} + \dim A^i - \dim A^i) = \sum (-1)^i \dim A^{i+1}$$
We then note that $\sum(-1)^i \dim A^{i+1} = \sum(-1)^i \dim A^i$, since the only term we skipped was $A^0 = 0$, which has dimension $0$.
\end{proof}
%
\begin{exer}
Let $\mathsf{Com}$ be the category of complexes of modules and the morphisms $A^\bullet \to B^\bullet$ are commuting diagrams
$$\begin{tikzcd}
\cdots \arrow[r] & A^{i-1} \arrow[d] \arrow[r, "f^i"] & A^i \arrow[d] \arrow[r, "f^i"] & A^{i+1} \arrow[d] \arrow[r, "f^{i+1}"] & \cdots \\
\cdots \arrow[r] & B^{i-1} \arrow[r, "g^i"] & B^i \arrow[r, "g^i"] & B^{i+1} \arrow[r, "g^{i+1}"] & \cdots
\end{tikzcd}$$
Show that $\mathsf{Com}$ is an abelian category.
\end{exer}
%
\begin{proof}
We first show that it is additive. Given complexes $A^\bullet$ and $B^\bullet$, let $F,G : A^\bullet \to B^\bullet$, where $f^i,g^i : A^i \to B^i$. It is clear that their sum $F + G$ is also an element of $\hom(A^\bullet, B^\bullet)$, and that this operation is commutative. In addition, the identity element consists of the zero maps $A^i \to B^i$, and the inverse of $F$ is $-F$, so $\hom(A^\bullet, B^\bullet)$ is an abelian group. We next want to show that composition distributes. Let $F,G : A^\bullet \to B^\bullet$ and $\varphi : B^\bullet \to C^\bullet$. We want to show that $\varphi \circ (F + G) = \varphi \circ F + \varphi \circ G$. Since $\mathsf{Mod}_R$ is an abelian category, we know that it distributes ``pointwise," i.e. $\varphi^i \circ (f^i + g^i) = \varphi^i \circ f^i + \varphi^i + g^i$, so composition distributes. The same argument shows it for composing on the right. The zero object of this category is the $0$-chain. Finally, we want to show that all finite products exist. It is clear that the product of two complexes $A^\bullet$ and $B^\bullet$ is the product $A^\bullet \times B^\bullet$, where the modules are $A^i \times B^i$ and the maps are $f^i \times g^i$, which again forms a complex, so the category contains all finite products. 

To show it is an abelian category, it will be useful to establish what kernels and cokernels are in this category. Let $\varphi : A^\bullet \to B^\bullet$, where the maps are denoted $f^i: A^i \to A^{i+1}$ and $g^i : B^i \to B^{i+1}$. We have that $\varphi$ is given by a collection of maps $\varphi^i : A^i \to B^i$. Then let $K^\bullet$ be the chain where $K^i = \ker\varphi^i$ and the maps $K^i \to K^{i+1}$ are the restrictions $f^i\big\vert_{K^i}$. Since the $f^{i+1} \circ f^i = 0$, it is clear that their restrictions also compose to $0$, so $K^\bullet$ indeed defines a complex. In addition, it comes equipped with a natural map $I : K^\bullet \to A^\bullet$, which is just the inclusion $K^i \hookrightarrow A^i$. Finally, since each of the $K^i$ is the kernel to $\varphi^i$, it is also clear that the composition $\varphi \circ I$ is equivalent to the $0$ map, so $K^\bullet$ is the kernel. A similar easy proof will show that the complex $C^\bullet$ given by $C^i = \coker \varphi^i = B^i / \im\varphi^i$ is the cokernel of the chain map $\varphi$, so our category contains all kernels and cokernels. In this category, the concept of monomorphism and epimorphism is equivalent to being injective/surjective at each $i$, in which case we can verify ``pointwise" that each monomorphism being the kernel of its cokernel (and the dual statement) due to the fact that the complexes are defined over an abelian category. Therefore, $\mathsf{Com}$ is an abelian category.
\end{proof}
%
\begin{exer}
Let $\varphi : A^\bullet \to B^\bullet$. Show that this induces a map $H^i(A^\bullet) \to H^i(B^\bullet)$, which defines a functor $\mathsf{Com} \to \mathscr{C}$.
\end{exer}
\begin{proof}
We note that the condition that
$$\begin{tikzcd}
\cdots \arrow[r, "f^{i-2}"] & A^{i-1} \arrow[d, "\varphi^{i-1}"] \arrow[r, "f^{i-1}"] & A^i \arrow[d, "\varphi^{i}"] \arrow[r, "f^i"] & A^{i+1} \arrow[d, "\varphi^{i+1}"] \arrow[r, "f^{i+1}"] & \cdots \\
\cdots \arrow[r, "g^{i-2}"'] & B^{i-1} \arrow[r, "g^{i-1}"'] & B^i \arrow[r, "g^i"'] & B^{i+1} \arrow[r, "g^{i+1}"'] & \cdots 
\end{tikzcd}$$
commutes implies that $\varphi^i(\ker f^i) \subset \ker g^i$ and $\varphi^i(\im f^{i-1}) \subset \im g^{i-1}$. Therefore, we can define the map $\tilde{\varphi}^i : H^i(A^\bullet) \to H^i(B^\bullet)$ by $\varphi(a + \im f^{i-1}) = \varphi(a) + \im g^{i-1}$, which is well defined since $\varphi(a + \im f^{i-1}) = \varphi(a) + \varphi(\im f^{i-1}) \subset \varphi(a) + \im g^{i-1}$, and since $\varphi(a) \in \ker g^i$, so it descends to a well-defined map on homology. It is also clear from the defnition that it is functorial, since composing two chain maps results in a pointwise composition for each $i$, which then descends to homology the same way (via composition).
\end{proof}
%
A fundamental concept in homology (though we won't prove it now), is that if you see a short exact sequence of complexes, you get a long exact sequence of homology. This is particularly useful in finding the homology groups of new spaces.
%
\begin{thm}
Given a short exact sequence of complexes
$$\begin{tikzcd}
0^\bullet \arrow[d]& & \cdots \arrow[r] & 0 \arrow[d] \arrow[r] & 0 \arrow[d] \arrow[r] & 0 \arrow[d] \arrow[r] & \cdots \\
A^\bullet \arrow[d] & & \cdots \arrow[r] & A \arrow[d] \arrow[r] & A \arrow[d] \arrow[r] & A \arrow[d] \arrow[r] & \cdots \\
B^\bullet \arrow[d] & & \cdots \arrow[r] & B \arrow[d] \arrow[r] & B \arrow[d] \arrow[r] & B \arrow[d] \arrow[r] & \cdots \\
C^\bullet \arrow[d] & & \cdots \arrow[r] & C \arrow[d] \arrow[r] & C \arrow[d] \arrow[r] & C \arrow[d]\arrow[r] \arrow[d] & \cdots \\
0^\bullet & & \cdots \arrow[r] & 0 \arrow[r] & 0 \arrow[r] & 0 \arrow[r] & \cdots
\end{tikzcd}$$
Gives us a long exact sequence in homology
$$\begin{tikzcd}
& \cdots \ar[r] & H^{i-1}(C^\bullet) \ar[ddll] \\\\
H^i(A^\bullet) \ar[r] & H^i(B^\bullet) \ar[r] & H^i(C^\bullet) \ar[ddll] \\\\
H^{i+1}(A^\bullet) \ar[r] & \cdots
\end{tikzcd}$$
\end{thm}
%
\begin{defn}
A covariant additive functor $F$ is \ib{right exact} if given an exact sequence
$$A \to A' \to A'' \to 0 $$
we have that 
$$F(A) \to F(A') \to F(A'') \to 0 $$
is exact
$F$ is \ib{left exact} if the exact sequence
$$0 \to A \to A' \to A'' $$
implies that 
$$0 \to F(A) \to F(A') \to F(A'') $$
is exact. If $F$ is contravariant, then left-exactness means that
$$A \to A' \to A'' \to 0 $$
being exact implies
$$0 \to F(A'') \to F(A') \to F(A)$$
is exact. Right exactness for contravaraint functors is defined similarly. We say a functor (covariant or contravariant) is \ib{exact} if it is both right and left exact.
\end{defn}
%
\begin{exer}
Let $F: \mathscr{A} \to \mathscr{B}$ be a covariant functor of abelian categories, and let $C^\bullet$ be a complex in $\mathscr{A}$.
\begin{enumerate}
\item ($F$ right exact yields $FH^\bullet \to H^\bullet F$) If $F$ is right exact, describe natural morphisms 
$$F(H^i(C^\bullet)) \to H^i(F(C^\bullet))$$
where $F(C^\bullet)$ denotes the complex
$$\cdots \to F(C^{i-1}) \to F(C^i) \to F(C^{i+1}) \to \cdots $$
\item ($F$ left exact yields $H^\bullet F \to FH^\bullet$) If $F$ is left exact, describe natural morphisms
$$H^i(F(C^\bullet)) \to F(H^i(C^\bullet)) $$
\item ($F$ exact yields $H^\bullet F \leftrightarrow FH^\bullet$) If $F$ is exact, show that the two maps above are isomorphisms.
\end{enumerate}
\end{exer}
\begin{proof}
Let $d^i : C^i \to C^{i+1}$ be the maps of the complex $C^\bullet$.
\begin{enumerate}
\item We know for any complex, we have that
$$\begin{tikzcd}
C^i \ar[r,"d^i"] & C^{i+1} \ar[r] & \coker d^i \ar[r] & 0
\end{tikzcd}$$
is exact. Right-exactness of $F$ then implies that applying $F$ to each part of the sequence is also exact, and we also know that 
$$\begin{tikzcd}
F(C^i) \ar[r, "F(d^i)"] & F(C^{i+1}) \ar[r] & \coker F(d^i) \ar[r] & 0
\end{tikzcd}$$
is exact. Exactness then gives that both $F(\coker d^i)$ and $\coker F(d^i)$ are isomorphic to $F(C^{i+1}) / \im F(d^i)$, so they are isomorphic. From before, (and applying $F$), we get the exact sequence
$$\begin{tikzcd}
F(\im d^i) \ar[r] & F(C^{i+1}) \ar[r] & F(\coker d^i) \ar[r] & 0
\end{tikzcd}$$
which means that the map $F(\im d^i) \to F(C^{i+1})$ is an epimorphism onto $\ker( F(C^{i+1}) \to F(\coker d^i)) = \im F(d^i)$.
Again from a previous exercise (and applying $F$), we get an exact sequence
$$\begin{tikzcd}
F(H^i(C^\bullet)) \ar[r] & F(\coker d^{i-1}) \ar[r] & F(\im d^i) \ar[r] & 0
\end{tikzcd}$$
Which means that $F(H^i(C^\bullet))$ maps to the kernel of $\tilde{d}^i : \coker F(d^{i-1}) \to F(\im d^i)$, which is just the map $F(d^i)$ factored through the quotient, which exactly $F(\ker d^i) / F(\im d^{i-1}) = H^i(F(C^\bullet))$.
\item If $F$ is left exact, we apply $F$ to an exact sequence we had before to obtain the exact sequence
$$\begin{tikzcd}
0 \ar[r] & F(\ker d^i) \ar[r] & F( C^i) \ar[r, "F(d^i)"] & F(\im d^i)
\end{tikzcd}$$
We also already know that the sequence
$$\begin{tikzcd}
0 \ar[r] & \ker F(d^i) \ar[r] & F(C^i) \ar[r, "F(d^i)"] & \im F(d^i)
\end{tikzcd}$$
is exact, giving an isomorphism $F(\ker d^i) \to \ker F(d^i)$. From before, we then get an exact sequence
$$\begin{tikzcd}
0 \ar[r] & F(\im d^{i-1}) \ar[r] & F(\ker d^i) \ar[r] & F(H^i(C^\bullet))
\end{tikzcd}$$
which implies that $F(\im d^{i-1}) \to \ker( F(\ker d^i) \to F(H^i(C^\bullet)))$ is a monomorphism, giving us a map $F(\ker d^i) / F(\im d^{i-1}) \cong H^i(F(C^\bullet)) \to F(H^i(C^\bullet))$.
\item If $F$ is both right and left exact, with left exactness, we get that 
$$\begin{tikzcd}
0 \ar[r] & F(\im d^{i-1}) \ar[r] & F(\ker d^i) \ar[r] & F(H^i(C^\bullet)) \ar[r] & 0
\end{tikzcd}$$
is exact, so we get a natural isomorphism $F(\ker d^i) / F(\im d^{i-1}) \cong H^i(F(C^\bullet)) \to F(H^i(C^\bullet))$, which is exactly the map from (2). From right exactness, we get the exact sequence
$$\begin{tikzcd}
0 \ar[r] & F(H^i(C^\bullet)) \ar[r] & F(\coker d^{i-1}) \ar[r] & F(\im d^i) \ar[r] & 0
\end{tikzcd}$$
which now gives an isomorphism $F(H^i(C^\bullet)) \to \ker (F(\coker d^{i-1}) \to F(\im d^i)) \cong H^i(F(C^\bullet))$ 
Therefore both maps are isomorphisms.
\end{enumerate}
\end{proof}
%
At this point, we'll skip ahead to sheaves
%
\section*{Sheaves}
%
The central idea behind sheaves are that they assign ``gluable" data to the open sets of a topological space that behave like functions do. The motivating example here is the sheaf of differentiable functions. For example, if we have a manifold $X$, the sheaf of differentiable function on $X$ will contain all the data of differentiable functions $U \to \R$ for all open sets $U \subset X$. We denote the set of functions $U \to \R$ as $\O(U)$. Note that $\O(U)$ is more than just a set, it comes with natural ring operations, namely pointwise addition and multiplication. In addition, functions can be restricted. If we have open sets $V \subset U$, we get a map $r_{UV}: \O(U) \to \O(V)$ given by $r_{UV}(f) = f\big\vert_V$. Note that all the $r_{UV}$ are ring homomorphisms. In addition, if we also have $W \subset V \subset U$, we have that restricting down to $W$ from $U$ is the same as restricting from $U$ to $V$ first, and then restricting to $W$ afterwards. In other words, the following diagram commutes
$$\begin{tikzcd}
\O(U) \ar[r, "r_{UV}"] \ar[rr, bend right=20, "r_{UW}"'] & \O(V) \ar[r, "r_{VW}"]& \O(W)
\end{tikzcd}$$
Another property of functions that we want to capture is a criterion for when they are the same. In this case, suppose we have two functions $f,g \in \O(U)$, and we have an open cover $\set{U_\alpha}$ of $U$. Then suppose $f$ and $g$ agree on the open cover, i.e. $r_{UU_\alpha}(f) = r_{UU_\alpha}(g)$ for all the $U_\alpha$ in the cover. Then we know $f = g$. Finally, if we have a function $f_\alpha \in \O(U_\alpha)$ such that they agree on overlaps, i.e. $r_{U_\alpha U_\alpha \cap U_\beta}(f_\alpha) = r_{U_\beta U_\alpha \cap U_\beta}(f_\beta)$, we obtain a new function that agrees with all the $f_\alpha$. In other words, we get a $f \in \O(U)$ satisfying $r_{UU_\alpha}(f) = f_\alpha$ for all $\alpha$.

Finally, with differentiable functions, we can talk about something called \ib{germs}. Intuitively, the germ is an infinitesimal piece of a differentiable function, like a germ sprouting out of a seed. Germs are equivalence classes of the form $(f,U)$ with $f : U \to \R$, where $(f,U) \sim (g V)$ if there exists some open set $W$ with $W \subset U$ and $W \subset V$ such that $r_{UW}(f) = r_{UV}(g)$. So germs are literally equivalence classes of functions that agree on some open subset. We let $\O_p$ denote the set of all germs based on open sets containing the point $p$, and call it the \ib{stalk} at $p$. Much like $\O(U)$, $\O_p$ is a ring under the same operations. It is easy to see that this is well defined on equivalence classes. In addition, for every $p \in U$, we get a map $\O(U) \to \O_p$ by sending the function to its germ.

Another property of $\O_p$ is that it is a \emph{local ring}, i.e. it has a single maximal ideal, all the germs vanish at $p$, denoted $\mathfrak{m}_p$. It is clear that this is an ideal, since the sum of functions that are $0$ at $p$ is another function vanishing at $p$, and the product of any function with one that vanishes at $p$ also vanishes at $p$. To show it is maximal, we prove its quotient $\O_p / \mathfrak{m}_p$ is a field.
$$\begin{tikzcd}
0 \ar[r] & \mathfrak{m}_p \ar[r] & \O_p \ar[r] & \R \ar[r] & 0
\end{tikzcd}$$
where the map $\O_p \to \R$ is given by evaluation at $p$.
\begin{exer}
Prove $\O_p$ is a local ring, with unique maximal ideal $\mathfrak{m}_p$.
\end{exer}
%
\begin{proof}
We note the evaluation map $\O_P \to \R$ is a homomorphism, so now we only need to verify that it is surjective with kernel $\mathfrak{m}_p$. It is clearly surjective, since given any real number $\lambda$, there is a function with value $\lambda$ at $p$, namely the constant function $\lambda$. We then note that the kernel of this map is exactly $\mathfrak{m}_p$ by definition, so $\mathfrak{m}_p$ is maximal.

To show that it is local, we first claim that every element in $\O_p - \mathfrak{m}_p$ is a unit. To show this, let $(f,U)$, where $f(p) \neq 0$.  Then since $f$ is continuous, then we know that it is not $0$ in a neighborhood of $p$, so there exists another function $(g,V)$ with $V \subset U$ such that $f(x)g(x) = 1$ for all $x \in V$. Therefore, the germ of $g$ is the multiplicative inverse to the germ of $f$, so the germ of $f$ is a unit. Therefore, every non-trivial ideal of $\O_p$ must be contained in $\mathfrak{m}_p$, since otherwise it would contain a unit, which proves that $\mathfrak{m}_p$ is the only maximal ideal of $\O_p$.
\end{proof}
%
We now define a sheaf with more formality. In this case, we'll be defining it as a sheaf of sets, but you can just as easily replace $\mathsf{Set}$ with $\mathsf{Ab}$,$\mathsf{Grp}$, or $\mathsf{Ring}$.
%
\begin{defn}
A \ib{presheaf} $\mathscr{F}$  on a topological space $X$ consists of 
\begin{enumerate}
\item The assignment to each open set $U \subset X$ a set (or group, or ring, etc) $\mathscr{F}(U)$\footnote{Other notation used for $\mathscr{F}(U)$ is $\Gamma(U,\mathscr{F})$ and $H^0(U,\mathscr{F})$}. We often refer to the elements of $\mathscr{F}(U)$ as \ib{sections} of $U$.
\item For every inclusion $V \subset U$, a map (or group/ring homomorphism, etc) $r_{UV} : \mathscr{F}(U) \to \mathscr{F}(V)$ such that $r_{UU} = \id_{\mathscr{F}(U)}$ and for $W \subset V \subset U$, the following diagram commutes
$$\begin{tikzcd}
\mathscr{F}(U) \ar[r, "r_{UV}"] \ar[rr, bend right=20, "r_{UW}"'] & \mathscr{F}(V) \ar[r, "r_{VW}"]& \mathscr{F}(W)
\end{tikzcd}$$
\end{enumerate}
\end{defn}
You might notice that this is exactly the data of a contravariant functor from the category of open sets of $X$ (as a poset) to $\mathsf{Set}$, which an equivalent definition.
\begin{defn}

\end{defn}
%
\end{document}
